"use strict";(self["webpackChunkgene_curator"]=self["webpackChunkgene_curator"]||[]).push([[331],{2416:function(e,t,a){a.d(t,{Z:function(){return p}});var l=a(3396),n=a(7139);const o={key:0},s={key:1};function r(e,t,a,r,i,u){const m=(0,l.up)("router-link"),d=(0,l.up)("v-data-table"),p=(0,l.up)("v-pagination"),c=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{headers:a.headers,items:a.items,"items-per-page":r.itemsPerPage,"onUpdate:itemsPerPage":t[0]||(t[0]=e=>r.itemsPerPage=e),"server-items-length":a.totalItems,loading:a.loading,class:"elevation-1",density:"compact"},(0,l.Nv)({_:2},[(0,l.Ko)(a.config.columns,(t=>({name:`item.${t.name}`,fn:(0,l.w5)((({item:a})=>["text"===t.type?((0,l.wg)(),(0,l.iD)("div",o,(0,n.zw)(a[t.name]),1)):"date"===t.type?((0,l.wg)(),(0,l.iD)("div",s,(0,n.zw)(r.formatTimestamp(a[t.name])),1)):"link"===t.type?((0,l.wg)(),(0,l.j4)(m,{key:2,to:t.to(a)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a[t.name]),1)])),_:2},1032,["to"])):"slot"===t.type?(0,l.WI)(e.$slots,t.slotName,{key:3,item:a}):(0,l.kq)("",!0)]))})))]),1032,["headers","items","items-per-page","server-items-length","loading"]),(0,l.WI)(e.$slots,"modal"),(0,l.Wm)(p,{modelValue:r.page,"onUpdate:modelValue":t[1]||(t[1]=e=>r.page=e),length:r.totalPages,"onUpdate:page":t[2]||(t[2]=t=>e.$emit("update-page",r.page))},null,8,["modelValue","length"])])),_:3})}var i=a(4870),u={props:{headers:Array,items:Array,config:Object,totalItems:Number,loading:Boolean},setup(e,{emit:t}){const a=(0,i.iH)(1),n=(0,i.iH)(10),o=(0,l.Fl)((()=>Math.ceil(e.totalItems/n.value))),s=e=>{if(!e)return"";const t=new Date(1e3*e.seconds);return t.toLocaleDateString()};return(0,l.YP)(a,(()=>{t("page-changed",a.value)})),(0,l.YP)(n,(()=>{t("items-per-page-changed",n.value)})),{page:a,itemsPerPage:n,totalPages:o,formatTimestamp:s}}},m=a(89);const d=(0,m.Z)(u,[["render",r]]);var p=d},1331:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=a(3396);const n=(0,l._)("h1",null,"User Administration",-1);function o(e,t,a,o,s,r){const i=(0,l.up)("v-select"),u=(0,l.up)("DataDisplayTable"),m=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[n,(0,l.Wm)(u,{headers:o.headers,items:o.paginatedUsers,config:o.tableConfig,"total-items":o.totalUsers,loading:o.loading},{"role-slot":(0,l.w5)((({item:e})=>[(0,l.Wm)(i,{items:["admin","curator","viewer"],modelValue:e.role,"onUpdate:modelValue":[t=>e.role=t,t=>o.updateUserRole(e,t)],dense:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["headers","items","config","total-items","loading"])])),_:1})}var s=a(4870),r=a(2416),i=a(5573),u=a(4547),m={name:"UserAdminView",components:{DataDisplayTable:r.Z},setup(){const e=(0,s.iH)({}),t=(0,s.iH)(!1),a=(0,s.iH)(1),n=(0,s.iH)(10);(0,l.bv)((async()=>{t.value=!0,e.value=await(0,i.Rf)(),t.value=!1}));const o=(0,l.Fl)((()=>Object.keys(e.value).length)),r=(0,l.Fl)((()=>{const t=(a.value-1)*n.value,l=t+n.value;return Object.values(e.value).slice(t,l)})),m=[{title:"User ID",value:"uid"},{title:"Email",value:"email"},{title:"Created Date",value:"createdAt"},{title:"Role",value:"role"}],d={columns:[{name:"name",type:"text"},{name:"email",type:"text"},{name:"createdAt",type:"date"},{name:"role",type:"slot",slotName:"role-slot"}]},p=async(e,t)=>{try{const a=u.k[t];await(0,i.Nq)(e.id,{role:t,permissions:a}),e.role=t}catch(a){console.error("Error updating user role:",a)}};return{users:e,loading:t,headers:m,paginatedUsers:r,totalUsers:o,tableConfig:d,updateUserRole:p}}},d=a(89);const p=(0,d.Z)(m,[["render",o]]);var c=p}}]);
//# sourceMappingURL=331.06e5e04c.js.map