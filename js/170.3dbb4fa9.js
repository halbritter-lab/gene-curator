"use strict";(self["webpackChunkgene_curator"]=self["webpackChunkgene_curator"]||[]).push([[170],{3655:function(e,a,t){t.d(a,{Z:function(){return s}});var l=t(3396),o=t(7139);function n(e,a,t,n,i,r){const u=(0,l.up)("v-card-title"),s=(0,l.up)("v-card-text"),c=(0,l.up)("v-spacer"),d=(0,l.up)("v-btn"),m=(0,l.up)("v-card-actions"),v=(0,l.up)("v-card"),p=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(p,{modelValue:r.internalVisible,"onUpdate:modelValue":a[0]||(a[0]=e=>r.internalVisible=e),"max-width":"400px"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.title),1)])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.message),1)])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c),(0,l.Wm)(d,{color:"green",onClick:r.confirmAction},{default:(0,l.w5)((()=>[(0,l.Uk)("Yes")])),_:1},8,["onClick"]),(0,l.Wm)(d,{color:"red",onClick:r.cancelAction},{default:(0,l.w5)((()=>[(0,l.Uk)("No")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var i={props:{visible:Boolean,title:String,message:String},emits:["confirm","cancel","update:visible"],computed:{internalVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{confirmAction(){this.$emit("confirm"),this.$emit("update:visible",!1)},cancelAction(){this.$emit("cancel"),this.$emit("update:visible",!1)}}},r=t(89);const u=(0,r.Z)(i,[["render",n]]);var s=u},9404:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});var l=t(3396);const o=e=>((0,l.dD)("data-v-281c26ae"),e=e(),(0,l.Cn)(),e),n=o((()=>(0,l._)("h1",null,"Curation Table",-1)));function i(e,a,t,o,i,r){const u=(0,l.up)("v-btn"),s=(0,l.up)("v-icon"),c=(0,l.up)("CurationModal"),d=(0,l.up)("DataDisplayTable"),m=(0,l.up)("ConfirmationModal"),v=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(v,null,{default:(0,l.w5)((()=>[n,(0,l.Wm)(d,{headers:o.headers,items:o.paginatedItems,config:o.tableConfig,"total-items":o.totalItems,loading:o.loading,onPageChanged:o.updatePage,onItemsPerPageChanged:o.updateItemsPerPage},(0,l.Nv)({modal:(0,l.w5)((()=>[(0,l.Wm)(c,{item:o.selectedItem,open:o.showModal,context:"curation",onClose:o.closeModal},null,8,["item","open","onClose"])])),_:2},[o.isCuratorOrAdmin?{name:"action-slot",fn:(0,l.w5)((({item:e})=>[(0,l.Wm)(u,{color:"primary",onClick:a=>o.openModal(e,"edit")},{default:(0,l.w5)((()=>[(0,l.Uk)("Edit")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{color:"green",onClick:a=>o.approveItem(e)},{default:(0,l.w5)((()=>[e.approvedBy?((0,l.wg)(),(0,l.j4)(s,{key:0,left:""},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-check")])),_:1})):(0,l.kq)("",!0),(0,l.Uk)(" Approve ")])),_:2},1032,["onClick"]),(0,l.Wm)(u,{color:"error",onClick:a=>o.deleteItem(e)},{default:(0,l.w5)((()=>[(0,l.Uk)("Delete")])),_:2},1032,["onClick"])])),key:"0"}:void 0]),1032,["headers","items","config","total-items","loading","onPageChanged","onItemsPerPageChanged"]),(0,l.Wm)(m,{visible:o.confirmModalVisible,title:o.confirmModalTitle,message:o.confirmModalMessage,onConfirm:o.onConfirm,onCancel:o.onCancel},null,8,["visible","title","message","onConfirm","onCancel"])])),_:1})}t(560);var r=t(4870),u=t(7385),s=t(4690),c=t(9814),d=t(3655),m=t(4157),v=t(7301),p={name:"CurationTable",components:{DataDisplayTable:u.Z,CurationModal:c.Z,ConfirmationModal:d.Z},setup(){const e=(0,r.iH)({}),a=(0,r.iH)(!1),t=(0,r.iH)(1),o=(0,r.iH)(10),n=(0,s.v0)(),i=(0,r.iH)(null),u=(0,r.iH)(!1),c=(0,r.iH)({}),d=(0,l.Fl)((()=>!!i.value)),p=(0,l.Fl)((()=>Object.keys(e.value).length)),f=(0,l.Fl)((()=>{const a=(t.value-1)*o.value,l=a+o.value;return Object.values(e.value).slice(a,l)})),g=(0,l.Fl)((()=>{const e=Object.entries(v.U8).filter((([,e])=>e.visibility.tableView)).map((([e,a])=>({title:a.label,value:e,sortable:"array"!==a.format&&"map"!==a.format,description:a.description})));return V.value&&e.push({title:"Actions",value:"actions",sortable:!1}),e})),C={columns:[{name:"approved_symbol",type:"link",to:e=>`/gene/${e.hgnc_id}`},{name:"createdAt",type:"date"},{name:"actions",type:"slot",slotName:"action-slot"}]},b=e=>{c.value=e,u.value=!0},w=()=>{u.value=!1},h=e=>{t.value=e},k=e=>{o.value=e},y=(0,r.iH)(!1),I=(0,r.iH)(""),_=(0,r.iH)("");let M=null;const A=(e,a,t)=>{I.value=e,_.value=a,M=t,y.value=!0},W=()=>{M&&M(),y.value=!1},P=()=>{y.value=!1},U=(a,t=null)=>{t?e.value[a]=t:delete e.value[a],e.value={...e.value}},D=async e=>{A("Delete Curation","Are you sure you want to delete this curation?",(async()=>{e&&e.id?(await(0,m.FH)(e.id),U(e.id)):console.error("Item ID is undefined or invalid")}))},H=async e=>{A("Approve Curation","Are you sure you want to approve this curation?",(async()=>{if(e&&e.id&&i.value){const a={...e,approvedBy:i.value.uid,approvedAt:(new Date).toISOString()};await(0,m.lO)(e.id,a,i.value.uid,v.U8),U(e.id,a)}else console.error("Item ID or User ID is undefined or invalid")}))};(0,l.bv)((async()=>{a.value=!0,e.value=await(0,m.VG)(),a.value=!1})),(0,s.Aj)(n,(e=>{i.value=e}));const V=(0,l.Fl)((()=>{const e=JSON.parse(localStorage.getItem("user"));return e&&("curator"===e.role||"admin"===e.role)}));return{headers:g,paginatedItems:f,tableConfig:C,totalItems:p,loading:a,isLoggedIn:d,showModal:u,selectedItem:c,openModal:b,closeModal:w,updatePage:h,updateItemsPerPage:k,deleteItem:D,updateCuration:m.lO,isCuratorOrAdmin:V,openConfirmModal:A,onConfirm:W,onCancel:P,confirmModalVisible:y,confirmModalTitle:I,confirmModalMessage:_,approveItem:H,updateLocalState:U}}},f=t(89);const g=(0,f.Z)(p,[["render",i],["__scopeId","data-v-281c26ae"]]);var C=g}}]);
//# sourceMappingURL=170.3dbb4fa9.js.map