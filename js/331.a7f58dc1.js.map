{"version":3,"file":"js/331.a7f58dc1.js","mappings":"mWAEEA,EAAAA,EAAAA,IAuCcC,EAAA,M,kBAtCZ,IA2Be,EA3BfC,EAAAA,EAAAA,IA2BeC,EAAA,CA1BZC,QAASC,EAAAD,QACTE,MAAOD,EAAAC,MACA,iBAAgBC,EAAAC,a,uCAAAD,EAAAC,aAAYC,GACnC,sBAAqBJ,EAAAK,WACrBC,QAASN,EAAAM,QACVC,MAAM,cACNC,QAAQ,Y,wBAEmBR,EAAAS,OAAOC,SAAjBC,I,cAAyCA,EAAOC,O,aAE/D,EAF2EC,UAAI,CAEpD,SAAhBF,EAAOG,OAAI,WAAtBC,EAAAA,EAAAA,IAEM,MAAAC,GAAAC,EAAAA,EAAAA,IADDJ,EAAKF,EAAOC,OAAI,IAGW,SAAhBD,EAAOG,OAAI,WAA3BC,EAAAA,EAAAA,IAEM,MAAAG,GAAAD,EAAAA,EAAAA,IADDf,EAAAiB,gBAAgBN,EAAKF,EAAOC,QAAI,IAGG,SAAhBD,EAAOG,OAAI,WAAnCnB,EAAAA,EAAAA,IAEcyB,EAAA,C,MAFmCC,GAAIV,EAAOU,GAAGR,I,mBAC7D,IAAuB,mBAApBA,EAAKF,EAAOC,OAAI,M,mBAGgB,SAAhBD,EAAOG,MAC1BQ,EAAAA,EAAAA,IAAkDC,EAAAC,OAArCb,EAAOc,SAAQ,C,MAAGZ,KAAMA,K,oGAM3CS,EAAAA,EAAAA,IAA0BC,EAAAC,OAAA,UAG1B3B,EAAAA,EAAAA,IAIgB6B,EAAA,C,WAHLxB,EAAAyB,K,qCAAAzB,EAAAyB,KAAIvB,GACZwB,OAAQ1B,EAAA2B,WACR,gBAAWC,EAAA,KAAAA,EAAA,GAAA1B,GAAEmB,EAAAQ,MAAM,cAAe7B,EAAAyB,Q,uDAYzC,GACEK,MAAO,CACLjC,QAASkC,MACThC,MAAOgC,MACPxB,OAAQyB,OACR7B,WAAY8B,OACZ7B,QAAS8B,SAEXC,KAAAA,CAAML,GAAO,KAAEM,IACb,MAAMX,GAAOY,EAAAA,EAAAA,IAAI,GACXpC,GAAeoC,EAAAA,EAAAA,IAAI,IAGnBV,GAAaW,EAAAA,EAAAA,KAAS,IAAMC,KAAKC,KAAKV,EAAM3B,WAAaF,EAAawC,SAGtExB,EAAmByB,IACvB,IAAKA,EAAW,MAAO,GACvB,MAAMC,EAAO,IAAIC,KAAyB,IAApBF,EAAUG,SAChC,OAAOF,EAAKG,oBAAoB,EAYlC,OARAC,EAAAA,EAAAA,IAAMtB,GAAM,KACVW,EAAK,eAAgBX,EAAKgB,MAAM,KAGlCM,EAAAA,EAAAA,IAAM9C,GAAc,KAClBmC,EAAK,yBAA0BnC,EAAawC,MAAM,IAG7C,CACLhB,OACAxB,eACA0B,aACAV,kBAEJ,G,QCnFF,MAAM+B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,2FCJIC,EAAAA,EAAAA,GAA4B,UAAxB,uBAAmB,G,gIADzBzD,EAAAA,EAAAA,IAoBcC,EAAA,M,kBAnBZ,IAA4B,CAA5BoB,GACAnB,EAAAA,EAAAA,IAgBmBwD,EAAA,CAfhBtD,QAASG,EAAAH,QACTE,MAAOC,EAAAoD,eACP7C,OAAQP,EAAAqD,YACR,cAAarD,EAAAsD,WACblD,QAASJ,EAAAI,S,CAGO,aAASmD,EAAAA,EAAAA,KACxB,EAD4B5C,UAAI,EAChChB,EAAAA,EAAAA,IAKY6D,EAAA,CAJTzD,MAAO,CAAC,QAAS,UAAW,U,WACpBY,EAAK8C,K,0BAAL9C,EAAK8C,KAAIvD,EACGwD,GAAY1D,EAAA2D,eAAehD,EAAM+C,IACtDE,MAAA,I,kKAeV,GACElD,KAAM,gBACNmD,WAAY,CACVC,iBAAgBA,EAAAA,GAElB3B,KAAAA,GACE,MAAM4B,GAAQ1B,EAAAA,EAAAA,IAAI,CAAC,GACbjC,GAAUiC,EAAAA,EAAAA,KAAI,GACdZ,GAAOY,EAAAA,EAAAA,IAAI,GACXpC,GAAeoC,EAAAA,EAAAA,IAAI,KAGzB2B,EAAAA,EAAAA,KAAUC,UACR7D,EAAQqC,OAAQ,EAChBsB,EAAMtB,YAAcyB,EAAAA,EAAAA,MACpB9D,EAAQqC,OAAQ,CAAK,IAGvB,MAAMa,GAAahB,EAAAA,EAAAA,KAAS,IAAMN,OAAOmC,KAAKJ,EAAMtB,OAAOf,SAErD0B,GAAiBd,EAAAA,EAAAA,KAAS,KAChC,MAAM8B,GAAS3C,EAAKgB,MAAQ,GAAKxC,EAAawC,MACxC4B,EAAMD,EAAQnE,EAAawC,MACjC,OAAOT,OAAOsC,OAAOP,EAAMtB,OAAO8B,MAAMH,EAAOC,EAAI,IAG7CxE,EAAU,CAChB,CAAE2E,MAAO,UAAW/B,MAAO,OAC3B,CAAE+B,MAAO,QAAS/B,MAAO,SACzB,CAAE+B,MAAO,eAAgB/B,MAAO,aAChC,CAAE+B,MAAO,OAAQ/B,MAAO,SAGlBY,EAAc,CAClB7C,QAAS,CACL,CACAE,KAAM,OACNE,KAAM,QAEN,CACAF,KAAM,QACNE,KAAM,QAEN,CACAF,KAAM,YACNE,KAAM,QAGN,CACAF,KAAM,OACNE,KAAM,OACNW,SAAU,eAMVoC,EAAiBM,MAAOQ,EAAMf,KAClC,IACE,MAAMgB,EAAcC,EAAAA,EAAgBjB,SAC9BkB,EAAAA,EAAAA,IAAWH,EAAKI,GAAI,CAAEpB,KAAMC,EAASgB,gBAC3CD,EAAKhB,KAAOC,CACd,CAAE,MAAOoB,GACPC,QAAQD,MAAM,4BAA6BA,EAC7C,GAGF,MAAO,CACLf,QACA3D,UACAP,UACAuD,iBACAE,aACAD,cACAM,iBAEJ,G,QCvGF,MAAMX,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://gene-curator/./src/components/DataDisplayTable.vue","webpack://gene-curator/./src/components/DataDisplayTable.vue?2290","webpack://gene-curator/./src/views/UserAdminView.vue","webpack://gene-curator/./src/views/UserAdminView.vue?fbb1"],"sourcesContent":["<!-- components/DataDisplayTable.vue -->\n<template>\n  <v-container>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      v-model:items-per-page=\"itemsPerPage\"\n      :server-items-length=\"totalItems\"\n      :loading=\"loading\"\n      class=\"elevation-1\"\n      density=\"compact\"\n    >\n      <template v-for=\"column in config.columns\" v-slot:[`item.${column.name}`]=\"{ item }\" :key=\"column.name\">\n        <!-- Handle text formatting -->\n        <div v-if=\"column.type === 'text'\">\n          {{ item[column.name] }}\n        </div>\n        <!-- Handle date formatting -->\n        <div v-else-if=\"column.type === 'date'\">\n          {{ formatTimestamp(item[column.name]) }}\n        </div>\n        <!-- Handle boolean formatting -->\n        <router-link v-else-if=\"column.type === 'link'\" :to=\"column.to(item)\">\n          {{ item[column.name] }}\n        </router-link>\n        <!-- Handle boolean formatting -->\n        <template v-else-if=\"column.type === 'slot'\">\n          <slot :name=\"column.slotName\" :item=\"item\"></slot>\n        </template>\n      </template>\n    </v-data-table>\n    \n    <!-- Modal slot -->\n    <slot name=\"modal\"></slot>\n\n    <!-- Pagination controls -->\n    <v-pagination\n      v-model=\"page\"\n      :length=\"totalPages\"\n      @update:page=\"$emit('update-page', page)\"\n    ></v-pagination>\n  </v-container>\n</template>\n\n<script>\nimport { ref, computed, watch } from 'vue';\n\n/**\n * A generic data table component for displaying items with configurable columns\n * and pagination.\n */\nexport default {\n  props: {\n    headers: Array, // The headers for the table\n    items: Array, // The items to display in the table\n    config: Object, // Configuration for the columns\n    totalItems: Number, // Total number of items for pagination\n    loading: Boolean, // Loading state\n  },\n  setup(props, { emit }) {\n    const page = ref(1); // Current page number\n    const itemsPerPage = ref(10); // Number of items per page\n\n    // Compute the total number of pages\n    const totalPages = computed(() => Math.ceil(props.totalItems / itemsPerPage.value));\n\n    // Method to format Firestore Timestamp\n    const formatTimestamp = (timestamp) => {\n      if (!timestamp) return '';\n      const date = new Date(timestamp.seconds * 1000);\n      return date.toLocaleDateString(); // Adjust format as needed\n    };\n\n    // Watch for changes in page and itemsPerPage and emit events\n    watch(page, () => {\n      emit('page-changed', page.value);\n    });\n\n    watch(itemsPerPage, () => {\n      emit('items-per-page-changed', itemsPerPage.value);\n    });\n\n    return {\n      page,\n      itemsPerPage,\n      totalPages,\n      formatTimestamp\n    };\n  },\n};\n</script>\n","import { render } from \"./DataDisplayTable.vue?vue&type=template&id=6f301894\"\nimport script from \"./DataDisplayTable.vue?vue&type=script&lang=js\"\nexport * from \"./DataDisplayTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- views/UserAdminView.vue -->\n<template>\n  <v-container>\n    <h1>User Administration</h1>\n    <DataDisplayTable\n      :headers=\"headers\"\n      :items=\"paginatedUsers\"\n      :config=\"tableConfig\"\n      :total-items=\"totalUsers\"\n      :loading=\"loading\"\n    >\n      <!-- Role slot for role selection -->\n      <template v-slot:role-slot=\"{ item }\">\n        <v-select\n          :items=\"['admin', 'curator', 'viewer']\"\n          v-model=\"item.role\"\n          @update:modelValue=\"(newRole) => updateUserRole(item, newRole)\"\n          dense\n        ></v-select>\n      </template>\n    </DataDisplayTable>\n\n  </v-container>\n</template>\n\n\n<script>\nimport { ref, computed, onMounted } from 'vue';\nimport DataDisplayTable from '@/components/DataDisplayTable.vue';\nimport { getUsers, updateUser } from '@/stores/usersStore';\nimport { userRolesConfig } from '@/config/userRolesConfig';\n\nexport default {\n  name: 'UserAdminView',\n  components: {\n    DataDisplayTable\n  },\n  setup() {\n    const users = ref({});\n    const loading = ref(false);\n    const page = ref(1);\n    const itemsPerPage = ref(10);\n\n    // Fetch users from Firestore\n    onMounted(async () => {\n      loading.value = true;\n      users.value = await getUsers();\n      loading.value = false;\n    });\n\n    const totalUsers = computed(() => Object.keys(users.value).length);\n\n    const paginatedUsers = computed(() => {\n    const start = (page.value - 1) * itemsPerPage.value;\n    const end = start + itemsPerPage.value;\n    return Object.values(users.value).slice(start, end);\n    });\n\n    const headers = [\n    { title: 'User ID', value: 'uid' },\n    { title: 'Email', value: 'email' },\n    { title: 'Created Date', value: 'createdAt' },\n    { title: 'Role', value: 'role' }\n    ];\n\n    const tableConfig = {\n      columns: [\n          {\n          name: 'name',\n          type: 'text'\n          },\n          {\n          name: 'email',\n          type: 'text'\n          },\n          {\n          name: 'createdAt',\n          type: 'date',\n          // Additional formatting for the date can be added here\n          },\n          {\n          name: 'role',\n          type: 'slot',\n          slotName: 'role-slot'\n          }\n      ]\n    };\n\n    // Method to update user role\n    const updateUserRole = async (user, newRole) => {\n      try {\n        const permissions = userRolesConfig[newRole];\n        await updateUser(user.id, { role: newRole, permissions });\n        user.role = newRole; // Update the local state\n      } catch (error) {\n        console.error('Error updating user role:', error);\n      }\n    };\n\n    return {\n      users,\n      loading,\n      headers,\n      paginatedUsers,\n      totalUsers,\n      tableConfig,\n      updateUserRole\n    };\n  },\n};\n</script>\n","import { render } from \"./UserAdminView.vue?vue&type=template&id=620681d8\"\nimport script from \"./UserAdminView.vue?vue&type=script&lang=js\"\nexport * from \"./UserAdminView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_v_container","_createVNode","_component_v_data_table","headers","$props","items","$setup","itemsPerPage","$event","totalItems","loading","class","density","config","columns","column","name","item","type","_createElementBlock","_hoisted_1","_toDisplayString","_hoisted_2","formatTimestamp","_component_router_link","to","_renderSlot","_ctx","$slots","slotName","_component_v_pagination","page","length","totalPages","_cache","$emit","props","Array","Object","Number","Boolean","setup","emit","ref","computed","Math","ceil","value","timestamp","date","Date","seconds","toLocaleDateString","watch","__exports__","render","_createElementVNode","_component_DataDisplayTable","paginatedUsers","tableConfig","totalUsers","_withCtx","_component_v_select","role","newRole","updateUserRole","dense","components","DataDisplayTable","users","onMounted","async","getUsers","keys","start","end","values","slice","title","user","permissions","userRolesConfig","updateUser","id","error","console"],"sourceRoot":""}