"use strict";(self["webpackChunkgene_curator"]=self["webpackChunkgene_curator"]||[]).push([[686],{6160:function(e,a,r){var t=r(6056),l=r(4690),o=r(5573);const i={signInWithGoogle:async()=>{try{const e=new l.hJ,a=await(0,l.rh)(t.I,e);await s(a.user);const r=await(0,o.CX)(a.user.email);return r}catch(e){throw console.error(e),e}},registerWithEmail:async(e,a)=>{try{const r=await(0,l.Xb)(t.I,e,a);await s(r.user);const i=await(0,o.CX)(r.user.email);return i}catch(r){throw console.error(r),r}},loginWithEmail:async(e,a)=>{try{const r=await(0,l.e5)(t.I,e,a),i=await(0,o.CX)(r.user.email);return i}catch(r){throw console.error(r),r}},signOut:async()=>{try{await(0,l.w7)(t.I)}catch(e){throw console.error(e),e}}};async function s(e){const a=await(0,o.CX)(e.email);if(!a){const a=await(0,o.Rf)(),r=0===Object.keys(a).length,t=r?"admin":"viewer";await(0,o.r4)({uid:e.uid,email:e.email,role:t,createdAt:new Date,updatedAt:new Date},e.uid)}}a.Z=i},92:function(e,a,r){r.d(a,{Z:function(){return u}});var t=r(3396),l=r(7139);function o(e,a,r,o,i,s){const n=(0,t.up)("v-card-title"),u=(0,t.up)("v-card-text"),c=(0,t.up)("v-spacer"),d=(0,t.up)("v-btn"),m=(0,t.up)("v-card-actions"),p=(0,t.up)("v-card"),g=(0,t.up)("v-dialog");return(0,t.wg)(),(0,t.j4)(g,{width:"470"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{style:{padding:"10px 0"}},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{style:{"font-family":"google-sans, sans-serif","font-size":"24px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(r.error.title),1)])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(r.error.message),1)])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c),(0,t.Wm)(d,{color:"primary",elevation:"0",onClick:a[0]||(a[0]=a=>e.$emit("value",!1))},{default:(0,t.w5)((()=>[(0,t.Uk)("Ok")])),_:1})])),_:1})])),_:1})])),_:1})}var i={name:"ErrorDialog",props:{error:{type:Object,default:()=>({})}}},s=r(89);const n=(0,s.Z)(i,[["render",o]]);var u=n},1086:function(e,a,r){r.d(a,{Z:function(){return c}});var t=r(3396),l=r(7139);const o={style:{"margin-left":"20px","margin-bottom":"0"}};function i(e,a,r,i,s,n){const u=(0,t.up)("v-progress-circular"),c=(0,t.up)("v-card"),d=(0,t.up)("v-dialog");return(0,t.wg)(),(0,t.j4)(d,{width:"200",value:r.value,onInput:a[0]||(a[0]=a=>e.$emit("value",!1)),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{style:{padding:"20px","text-align":"left",display:"flex","flex-direction":"row","align-items":"center"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{indeterminate:"",color:"primary"}),(0,t._)("p",o,(0,l.zw)(r.message),1)])),_:1})])),_:1},8,["value"])}var s={name:"LoadingDialog",model:{prop:"value",event:"value"},props:{value:{type:Boolean,default:!1},message:{type:String,default:""}}},n=r(89);const u=(0,n.Z)(s,[["render",i]]);var c=u},1686:function(e,a,r){r.r(a),r.d(a,{default:function(){return p}});var t=r(3396),l=r(9242),o=r(7139);function i(e,a,r,i,s,n){const u=(0,t.up)("v-card-title"),c=(0,t.up)("v-text-field"),d=(0,t.up)("v-btn"),m=(0,t.up)("v-form"),p=(0,t.up)("v-card-text"),g=(0,t.up)("v-card"),w=(0,t.up)("error-dialog"),f=(0,t.up)("loading-dialog"),v=(0,t.up)("v-container"),h=(0,t.up)("v-snackbar");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(v,{class:"fill-height d-flex align-center justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"pa-5",style:{width:"600px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"text-center text-h5 mb-4"},{default:(0,t.w5)((()=>[(0,t.Uk)("Register")])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{onSubmit:(0,l.iM)(n.register,["prevent"]),ref:"registerForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"primary",label:"Email",modelValue:s.email,"onUpdate:modelValue":a[0]||(a[0]=e=>s.email=e),type:"email",rules:[e=>!!e||"Email is required",e=>/.+@.+/.test(e)||"Email must be valid"],variant:"outlined",class:"mb-2"},null,8,["modelValue","rules"]),(0,t.Wm)(c,{color:"primary",label:"Password",modelValue:s.password,"onUpdate:modelValue":a[1]||(a[1]=e=>s.password=e),type:"password",rules:[e=>!!e||"Password is required",e=>!!e&&e.length>=6||"Password must be at least 6 characters"],variant:"outlined"},null,8,["modelValue","rules"]),(0,t.Wm)(d,{type:"submit",color:"primary",class:"mt-4"},{default:(0,t.w5)((()=>[(0,t.Uk)("Register")])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1}),(0,t.Wm)(w,{modelValue:s.error,"onUpdate:modelValue":a[2]||(a[2]=e=>s.error=e),error:s.errorVal,onValue:a[3]||(a[3]=e=>s.error=e)},null,8,["modelValue","error"]),(0,t.Wm)(f,{modelValue:s.loading,"onUpdate:modelValue":a[4]||(a[4]=e=>s.loading=e),message:"Please wait..."},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{modelValue:s.snackbarVisible,"onUpdate:modelValue":a[5]||(a[5]=e=>s.snackbarVisible=e),color:s.snackbarColor,timeout:6e3},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(s.snackbarMessage),1)])),_:1},8,["modelValue","color"])],64)}r(560);var s=r(6160),n=r(92),u=r(1086),c={name:"RegisterUser",components:{ErrorDialog:n.Z,LoadingDialog:u.Z},data(){return{error:!1,errorVal:{},loading:!1,email:"",password:"",snackbarVisible:!1,snackbarMessage:"",snackbarColor:""}},methods:{displaySnackbar(e,a){this.snackbarMessage=e,this.snackbarColor=a,this.snackbarVisible=!0},async register(){const{valid:e}=await this.$refs.registerForm.validate();if(e)try{this.loading=!0;const e=await s.Z.registerWithEmail(this.email,this.password);console.log(e),this.loading=!1,this.displaySnackbar("Registration successful! Redirecting...","success"),setTimeout((()=>{this.$router.push("/login")}),3e3)}catch(a){this.error=!0,this.errorVal={title:"Error",description:"There was an error registering your account"}}}}},d=r(89);const m=(0,d.Z)(c,[["render",i]]);var p=m}}]);
//# sourceMappingURL=686.0de47ce0.js.map