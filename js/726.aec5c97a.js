"use strict";(self["webpackChunkgene_curator"]=self["webpackChunkgene_curator"]||[]).push([[726],{4157:function(e,t,a){a.d(t,{FH:function(){return s},TN:function(){return d},VG:function(){return i},lO:function(){return u},pK:function(){return l}});a(560);var o=a(4287),r=a(6056);const i=async()=>{const e=await(0,o.PL)((0,o.hJ)(r.db,"curations"));let t={};return e.forEach((e=>{if(!e.exists())throw new Error("Curation document not found");t[e.id]={id:e.id,...e.data()}})),t},n=(e,t)=>{const a=[];for(const[o,r]of Object.entries(t))r.required&&!e[o]&&a.push(`The field "${r.label}" is required.`);return a},l=async(e,t)=>{const a=n(e,t);if(a.length>0)throw new Error(`Validation failed: ${a.join(" ")}`);const i=await(0,o.ET)((0,o.hJ)(r.db,"curations"),{...e,createdAt:o.EK.fromDate(new Date),updatedAt:o.EK.fromDate(new Date)});return i.id},u=async(e,t,a)=>{const i=n(t,a);if(i.length>0)throw new Error(`Validation failed: ${i.join(" ")}`);const l=(0,o.JU)(r.db,"curations",e);await(0,o.r7)(l,{...t,updatedAt:o.EK.fromDate(new Date)})},s=async e=>{const t=(0,o.JU)(r.db,"curations",e);await(0,o.oe)(t)},d=async e=>{const t=(0,o.hJ)(r.db,"curations"),a=(0,o.IO)(t,(0,o.ar)("approved_symbol","==",e)),i=(0,o.IO)(t,(0,o.ar)("hgnc_id","==",e));let n=[];const l=e=>{e.exists()&&n.push({id:e.id,...e.data()})},u=await(0,o.PL)(a);if(u.forEach(l),0===n.length){const e=await(0,o.PL)(i);e.forEach(l)}return n}},9441:function(e,t,a){a.d(t,{QY:function(){return d},ds:function(){return u},el:function(){return l},wp:function(){return n},x6:function(){return s}});a(560);var o=a(4287),r=a(6056);const i=(e,t)=>{const a=[];for(const[o,r]of Object.entries(t))!r.required||void 0!==e[o]&&""!==e[o]||a.push(`The field "${r.label}" is required.`);return a},n=async()=>{const e=await(0,o.PL)((0,o.hJ)(r.db,"precurations"));let t={};return e.forEach((e=>{if(!e.exists())throw new Error("Precuration document not found");t[e.id]={id:e.id,...e.data()}})),t},l=async(e,t)=>{const a=i(e,t);if(a.length>0)throw new Error(`Validation failed: ${a.join(" ")}`);const n=await(0,o.ET)((0,o.hJ)(r.db,"precurations"),{...e,createdAt:o.EK.fromDate(new Date),updatedAt:o.EK.fromDate(new Date)});return n.id},u=async e=>{const t=(0,o.hJ)(r.db,"precurations"),a=(0,o.IO)(t,(0,o.ar)("approved_symbol","==",e)),i=(0,o.IO)(t,(0,o.ar)("hgnc_id","==",e)),n=await(0,o.PL)(a),l=await(0,o.PL)(i);let u=null;return n.forEach((e=>{e.exists()&&(u={id:e.id,...e.data()})})),u||l.forEach((e=>{e.exists()&&(u={id:e.id,...e.data()})})),u},s=async(e,t,a)=>{const n=i(t,a);if(n.length>0)throw new Error(`Validation failed: ${n.join(" ")}`);const l=(0,o.JU)(r.db,"precurations",e);await(0,o.r7)(l,{...t,updatedAt:o.EK.fromDate(new Date)})},d=async e=>{const t=(0,o.JU)(r.db,"precurations",e);await(0,o.oe)(t)}},1683:function(e,t,a){a.d(t,{Z:function(){return W}});var o=a(3396),r=a(7139);const i={class:"d-flex justify-space-between align-center"};function n(e,t,a,n,l,u){const s=(0,o.up)("v-card-title"),d=(0,o.up)("v-icon"),c=(0,o.up)("v-btn"),p=(0,o.up)("v-tab"),m=(0,o.up)("v-tabs"),w=(0,o.up)("GeneDetailCard"),f=(0,o.up)("PrecurationForm"),g=(0,o.up)("v-window-item"),h=(0,o.up)("CurationForm"),v=(0,o.up)("v-window"),y=(0,o.up)("v-card-text"),b=(0,o.up)("v-spacer"),k=(0,o.up)("v-card-actions"),_=(0,o.up)("v-card"),V=(0,o.up)("v-dialog"),D=(0,o.up)("v-snackbar");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(V,{modelValue:n.isOpen,"onUpdate:modelValue":t[2]||(t[2]=e=>n.isOpen=e),persistent:"","max-width":"1200px"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(n.title)+" - "+(0,r.zw)(n.editedItem.approved_symbol)+" - HGNC:"+(0,r.zw)(n.editedItem.hgnc_id),1)])),_:1}),(0,o.Wm)(c,{icon:"",onClick:n.close},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-close")])),_:1})])),_:1},8,["onClick"])]),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:n.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tab=e),grow:""},{default:(0,o.w5)((()=>[n.showPreCurationTab?((0,o.wg)(),(0,o.j4)(p,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)("Pre-Curation")])),_:1})):(0,o.kq)("",!0),n.showCurationTab?((0,o.wg)(),(0,o.j4)(p,{key:1},{default:(0,o.w5)((()=>[(0,o.Uk)("Curation")])),_:1})):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),(0,o.Wm)(v,{modelValue:n.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>n.tab=e),style:{"min-height":"300px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[n.showGeneDetailCard?((0,o.wg)(),(0,o.j4)(w,{key:0,id:n.editedItem.hgnc_id,visibilityScope:"curationView",showTitle:!1,onGeneDataLoaded:n.handleGeneDataLoaded},null,8,["id","onGeneDataLoaded"])):(0,o.kq)("",!0),(0,o.Wm)(f,{approvedSymbol:n.editedItem.approved_symbol,hgncId:n.editedItem.hgnc_id,onPrecurationAccepted:n.handlePrecurationAccepted},null,8,["approvedSymbol","hgncId","onPrecurationAccepted"])])),_:1}),n.showCurationTab?((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{approvedSymbol:n.editedItem.approved_symbol,hgncId:n.editedItem.hgnc_id},null,8,["approvedSymbol","hgncId"])])),_:1})):(0,o.kq)("",!0)])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b),(0,o.Wm)(c,{color:"blue darken-1",text:"",onClick:n.close},{default:(0,o.w5)((()=>[(0,o.Uk)("Cancel")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(D,{modelValue:n.snackbarVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>n.snackbarVisible=e),color:n.snackbarColor,timeout:6e3},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(n.snackbarMessage),1)])),_:1},8,["modelValue","color"])],64)}var l=a(4870),u=a(4936);function s(e,t,a,i,n,l){const u=(0,o.up)("v-card-title"),s=(0,o.up)("v-col"),d=(0,o.up)("v-switch"),c=(0,o.up)("v-tooltip"),p=(0,o.up)("v-text-field"),m=(0,o.up)("v-select"),w=(0,o.up)("v-row"),f=(0,o.up)("v-btn"),g=(0,o.up)("v-container"),h=(0,o.up)("v-card-text"),v=(0,o.up)("v-card"),y=(0,o.up)("error-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(v,{class:"elevation-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Precuration")])),_:1}),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.groupedFields,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},[l.groupHasVisibleFields(e)?((0,o.wg)(),(0,o.j4)(w,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,r.zw)(t),1)])),_:2},1024),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((t,a)=>((0,o.wg)(),(0,o.j4)(s,{key:a,cols:12/e.length},{default:(0,o.w5)((()=>["boolean"===t.format&&t.visibility.curationView?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(d,{modelValue:n.precurationData[t.key],"onUpdate:modelValue":e=>n.precurationData[t.key]=e,label:t.label,"false-value":!1,"true-value":!0,color:"switch"===t.style.curationView?t.style.color:"",class:(0,r.C_)({"inactive-switch":!n.precurationData[t.key]&&"switch"===t.style.curationView})},null,8,["modelValue","onUpdate:modelValue","label","color","class"]),(0,o.Wm)(c,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.description),1)])),_:2},1024)],64)):t.style&&"text-field"===t.style.curationView&&t.visibility.curationView?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(p,{modelValue:n.precurationData[t.key],"onUpdate:modelValue":e=>n.precurationData[t.key]=e,label:t.label,class:(0,r.C_)("text-field"===t.style.curationView?"custom-text-field":"")},null,8,["modelValue","onUpdate:modelValue","label","class"]),(0,o.Wm)(c,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.description),1)])),_:2},1024)],64)):t.style&&"select"===t.style.curationView&&t.visibility.curationView?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[(0,o.Wm)(m,{modelValue:n.precurationData[t.key],"onUpdate:modelValue":e=>n.precurationData[t.key]=e,items:t.options,label:t.label},null,8,["modelValue","onUpdate:modelValue","items","label"]),(0,o.Wm)(c,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.description),1)])),_:2},1024)],64)):(0,o.kq)("",!0)])),_:2},1032,["cols"])))),128))])),_:2},1024)):(0,o.kq)("",!0)],64)))),128)),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{cols:"12",class:"text-right"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{color:"primary",onClick:l.submitPrecuration},{default:(0,o.w5)((()=>[(0,o.Uk)("Accept")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(y,{modelValue:n.error,"onUpdate:modelValue":t[0]||(t[0]=e=>n.error=e),error:n.errorVal,onValue:t[1]||(t[1]=e=>n.error=e)},null,8,["modelValue","error"])],64)}a(560);var d=a(862),c=a(3636),p=a(9441),m=a(92),w={name:"PrecurationForm",props:{approvedSymbol:String,hgncId:String},emits:["precuration-accepted"],components:{ErrorDialog:m.Z},data(){return{precurationData:this.initializePrecurationData(),existingPrecurationId:null,error:!1,errorVal:{}}},computed:{groupedFields(){const e=this.precurationFields,t={};return e.forEach((e=>{t[e.group.name]||(t[e.group.name]=[]),t[e.group.name].push(e)})),Object.values(t).forEach((e=>{e.sort(((e,t)=>e.group.order-t.group.order))})),t},precurationFields(){let e=Object.entries(d.m).map((([e,t])=>({...t,key:e})));return e}},methods:{groupHasVisibleFields(e){return e.some((e=>e.visibility.curationView))},initializePrecurationData(){const e={};return Object.keys(d.m).forEach((t=>{"boolean"===d.m[t].format?e[t]=!1:e[t]="","approved_symbol"===t&&this.approvedSymbol&&(e[t]=this.approvedSymbol),"hgnc_id"===t&&this.hgncId&&(e[t]=this.hgncId)})),e},validatePrecurationData(e){const t=[];for(const[a,o]of Object.entries(d.m))!o.required||void 0!==e[a]&&""!==e[a]||t.push(`The field "${o.label}" is required.`);return t},async submitPrecuration(){this.error=!1,this.errorVal={};try{const e=this.validatePrecurationData(this.precurationData,d.m);if(e.length>0)throw new Error(`Validation failed: ${e.join(" ")}`);const t=(new Date).toISOString();if(this.existingPrecurationId)this.precurationData.updatedAt=t,await(0,p.x6)(this.existingPrecurationId,this.precurationData,d.m),console.log("Precuration updated:",this.existingPrecurationId);else{this.precurationData.createdAt=t,this.precurationData.workflowConfigVersionUsed=c.se,this.precurationData.workflowConfigNameUsed=c.l9;const e=await(0,p.el)(this.precurationData,d.m);console.log("New precuration created with ID:",e)}this.$emit("precuration-accepted",this.precurationData)}catch(e){this.error=!0,this.errorVal={title:"Submission Error",message:e.message||"There was an error submitting the precuration. Please check the required fields."},console.error("Error during precuration submission:",e.message)}},displaySwitchValue(e){return e?"Yes":"No"}},async created(){try{const e=await(0,p.ds)(this.approvedSymbol||this.hgncId);e&&(this.existingPrecurationId=e.id,Object.assign(this.precurationData,e))}catch(e){console.error("Error fetching precuration:",e.message)}}},f=a(89);const g=(0,f.Z)(w,[["render",s],["__scopeId","data-v-625d433f"]]);var h=g;function v(e,t,a,i,n,l){const u=(0,o.up)("v-icon"),s=(0,o.up)("v-btn"),d=(0,o.up)("v-card-title"),c=(0,o.up)("v-col"),p=(0,o.up)("v-text-field"),m=(0,o.up)("v-tooltip"),w=(0,o.up)("v-checkbox"),f=(0,o.up)("v-select"),g=(0,o.up)("v-row"),h=(0,o.up)("v-expansion-panel-text"),v=(0,o.up)("v-expansion-panel"),y=(0,o.up)("v-expansion-panels"),b=(0,o.up)("v-spacer"),k=(0,o.up)("v-card-actions"),_=(0,o.up)("v-card");return(0,o.wg)(),(0,o.j4)(_,{class:"elevation-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Curation "),(0,o.Wm)(s,{icon:"",class:"add-curation-btn",onClick:l.addCurationEntity},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(y,{multiple:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.curationDataArray,((e,t)=>((0,o.wg)(),(0,o.j4)(v,{key:`curation-${t}`,title:`Curation Entity ${t+1}`},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.groupedFields,((a,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[l.groupHasVisibleFields(a)?((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,r.zw)(i),1)])),_:2},1024),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a,((i,n)=>((0,o.wg)(),(0,o.j4)(c,{key:`field-${t}-${n}`,cols:12/a.length},{default:(0,o.w5)((()=>["text"===i.format&&i.style&&"text-field"===i.style.curationView?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(p,{modelValue:e[i.key],"onUpdate:modelValue":t=>e[i.key]=t,label:i.label,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","label"]),(0,o.Wm)(m,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.description),1)])),_:2},1024)],64)):"boolean"===i.format?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(w,{modelValue:e[i.key],"onUpdate:modelValue":t=>e[i.key]=t,label:i.label},null,8,["modelValue","onUpdate:modelValue","label"]),(0,o.Wm)(m,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.description),1)])),_:2},1024)],64)):"number"===i.format?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[(0,o.Wm)(p,{modelValue:e[i.key],"onUpdate:modelValue":t=>e[i.key]=t,label:i.label,min:i.min,max:i.max,type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","label","min","max"]),(0,o.Wm)(m,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.description),1)])),_:2},1024)],64)):"array"===i.format&&i.style&&"select"===i.style.curationView?((0,o.wg)(),(0,o.iD)(o.HY,{key:3},[(0,o.Wm)(f,{modelValue:e[i.key],"onUpdate:modelValue":t=>e[i.key]=t,items:i.options,label:i.label,multiple:"",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","items","label"]),(0,o.Wm)(m,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.description),1)])),_:2},1024)],64)):"text"===i.format&&i.style&&"select"===i.style.curationView?((0,o.wg)(),(0,o.iD)(o.HY,{key:4},[(0,o.Wm)(f,{modelValue:e[i.key],"onUpdate:modelValue":t=>e[i.key]=t,items:i.options,label:i.label,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","items","label"]),(0,o.Wm)(m,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.description),1)])),_:2},1024)],64)):(0,o.kq)("",!0)])),_:2},1032,["cols"])))),128))])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b),(0,o.Wm)(s,{color:"primary",onClick:l.saveCuration},{default:(0,o.w5)((()=>[(0,o.Uk)("Save All")])),_:1},8,["onClick"])])),_:1})])),_:1})}var y=a(9546),b=a(4157),k={name:"CurationForm",props:{approvedSymbol:String,hgncId:String},data(){return{curationDataArray:[this.initializeCurationData()],existingCurationId:null}},async created(){if(this.hgncId||this.approvedSymbol)try{const e=await(0,b.TN)(this.hgncId||this.approvedSymbol);e.length>0?this.curationDataArray=e.map((e=>Object.assign(this.initializeCurationData(),e))):this.curationDataArray=[this.initializeCurationData()]}catch(e){console.error("Error fetching curations:",e.message)}else this.curationDataArray=[this.initializeCurationData()]},computed:{groupedFields(){const e=Object.entries(y.U).map((([e,t])=>({...t,key:e}))),t={};return e.forEach((e=>{t[e.group.name]||(t[e.group.name]=[]),t[e.group.name].push(e)})),Object.values(t).forEach((e=>{e.sort(((e,t)=>e.group.order-t.group.order))})),t}},methods:{groupHasVisibleFields(e){return e.some((e=>e.visibility.curationView))},addCurationEntity(){this.curationDataArray.push(this.initializeCurationData())},initializeCurationData(){const e={};return Object.keys(y.U).forEach((t=>{const a=y.U[t];"boolean"===a.format?e[t]=!1:"number"===a.format?e[t]=a.min||0:"array"===a.format&&a.style&&"select"===a.style.curationView?e[t]=[]:"text"===a.format&&a.style&&"select"===a.style.curationView?e[t]=null:e[t]="","approved_symbol"===t&&this.approvedSymbol&&(e[t]=this.approvedSymbol),"hgnc_id"===t&&this.hgncId&&(e[t]=this.hgncId)})),e},validateCurationData(e){const t=[];for(const[a,o]of Object.entries(y.U))o.required&&!e[a]&&t.push(`The field "${o.label}" is required.`);return t},async saveCuration(){try{for(const e of this.curationDataArray)if(e.workflowConfigVersionUsed=c.se,e.workflowConfigNameUsed=c.l9,e.id)await(0,b.lO)(e.id,e,y.U),console.log("Curation updated:",e.id);else{const t=await(0,b.pK)(e,y.U);console.log("New curation created with ID:",t),e.id=t}}catch(e){console.error("Error saving curation:",e.message)}}}};const _=(0,f.Z)(k,[["render",v],["__scopeId","data-v-0d1866da"]]);var V=_,D={components:{GeneDetailCard:u.Z,PrecurationForm:h,CurationForm:V},props:{item:{type:Object,required:!0},open:{type:Boolean,required:!0},context:{type:String,default:"gene"}},emits:["close"],setup(e,{emit:t}){const a=(0,l.iH)(e.open),r=(0,l.iH)({...e.item}),i=(0,l.iH)(!0),n=(0,l.iH)(!0),u=(0,l.iH)(!1),s=(0,l.iH)(0),d=(0,l.iH)(!1),c=(0,l.iH)(""),m=(0,l.iH)("success"),w=(e,t="success")=>{c.value=e,m.value=t,d.value=!0};(0,o.m0)((()=>{a.value=e.open,r.value={...e.item}}));const f=()=>{"precuration"===e.context?g():(u.value=!0,s.value=1)},g=()=>t("close"),h=async()=>{try{const e=await(0,p.ds)(r.value.hgnc_id||r.value.approved_symbol);e?(u.value=!0,s.value=1):(u.value=!1,s.value=0)}catch(e){w("Error checking existing curation: "+e.message,"error")}},v=(0,l.iH)(null),y=e=>{v.value=e},b=(0,o.Fl)((()=>"curation"===e.context?"Curation":"precuration"===e.context?"Precuration":"Gene Curation"));(0,o.YP)((()=>e.open),(async e=>{e&&await k()}));const k=async()=>{"precuration"===e.context?(i.value=!1,n.value=!0,u.value=!1,s.value=0):"curation"===e.context?(i.value=!1,n.value=!1,await h(),s.value=u.value?1:0):await h()};return(0,o.YP)((()=>e.open),(e=>{e&&k()})),{initializeModal:k,isOpen:a,editedItem:r,close:g,handlePrecurationAccepted:f,showGeneDetailCard:i,showPreCurationTab:n,showCurationTab:u,tab:s,snackbarVisible:d,snackbarMessage:c,snackbarColor:m,showSnackbar:w,title:b,handleGeneDataLoaded:y,geneData:v}}};const U=(0,f.Z)(D,[["render",n],["__scopeId","data-v-382db494"]]);var W=U},7385:function(e,t,a){a.d(t,{Z:function(){return p}});var o=a(3396),r=a(7139);const i={key:0},n={key:1};function l(e,t,a,l,u,s){const d=(0,o.up)("v-tooltip"),c=(0,o.up)("router-link"),p=(0,o.up)("v-data-table"),m=(0,o.up)("v-pagination"),w=(0,o.up)("v-container");return(0,o.wg)(),(0,o.j4)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{headers:a.headers,items:a.items,"items-per-page":l.itemsPerPage,"onUpdate:itemsPerPage":t[0]||(t[0]=e=>l.itemsPerPage=e),"server-items-length":a.totalItems,loading:a.loading,class:"elevation-1",density:"compact"},(0,o.Nv)({_:2},[(0,o.Ko)(a.headers,(e=>({name:`header.${e.value}`,fn:(0,o.w5)((({header:t})=>[(0,o._)("span",null,(0,r.zw)(e.title),1),e.description?((0,o.wg)(),(0,o.j4)(d,{key:0,header:t,activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.description),1)])),_:2},1032,["header"])):(0,o.kq)("",!0)]))}))),(0,o.Ko)(a.config.columns,(t=>({name:`item.${t.name}`,fn:(0,o.w5)((({item:a})=>["text"===t.type?((0,o.wg)(),(0,o.iD)("div",i,(0,r.zw)(a[t.name]),1)):"date"===t.type?((0,o.wg)(),(0,o.iD)("div",n,(0,r.zw)(l.formatTimestamp(a[t.name])),1)):"link"===t.type?((0,o.wg)(),(0,o.j4)(c,{key:2,to:t.to(a)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a[t.name]),1)])),_:2},1032,["to"])):"slot"===t.type?(0,o.WI)(e.$slots,t.slotName,{key:3,item:a}):(0,o.kq)("",!0)]))})))]),1032,["headers","items","items-per-page","server-items-length","loading"]),(0,o.WI)(e.$slots,"modal"),(0,o.Wm)(m,{modelValue:l.page,"onUpdate:modelValue":t[1]||(t[1]=e=>l.page=e),length:l.totalPages,"onUpdate:page":t[2]||(t[2]=t=>e.$emit("update-page",l.page))},null,8,["modelValue","length"])])),_:3})}var u=a(4870),s={props:{headers:Array,items:Array,config:Object,totalItems:Number,loading:Boolean},setup(e,{emit:t}){const a=(0,u.iH)(1),r=(0,u.iH)(10),i=(0,o.Fl)((()=>Math.ceil(e.totalItems/r.value))),n=e=>{if(!e)return"";const t=new Date(1e3*e.seconds);return t.toLocaleDateString()};return(0,o.YP)(a,(()=>{t("page-changed",a.value)})),(0,o.YP)(r,(()=>{t("items-per-page-changed",r.value)})),{page:a,itemsPerPage:r,totalPages:i,formatTimestamp:n}}},d=a(89);const c=(0,d.Z)(s,[["render",l]]);var p=c},92:function(e,t,a){a.d(t,{Z:function(){return s}});var o=a(3396),r=a(7139);function i(e,t,a,i,n,l){const u=(0,o.up)("v-card-title"),s=(0,o.up)("v-card-text"),d=(0,o.up)("v-spacer"),c=(0,o.up)("v-btn"),p=(0,o.up)("v-card-actions"),m=(0,o.up)("v-card"),w=(0,o.up)("v-dialog");return(0,o.wg)(),(0,o.j4)(w,{width:"470"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{style:{padding:"10px 0"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{style:{"font-family":"google-sans, sans-serif","font-size":"24px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.error.title),1)])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.error.message),1)])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d),(0,o.Wm)(c,{color:"primary",elevation:"0",onClick:t[0]||(t[0]=t=>e.$emit("value",!1))},{default:(0,o.w5)((()=>[(0,o.Uk)("Ok")])),_:1})])),_:1})])),_:1})])),_:1})}var n={name:"ErrorDialog",props:{error:{type:Object,default:()=>({})}}},l=a(89);const u=(0,l.Z)(n,[["render",i]]);var s=u},4936:function(e,t,a){a.d(t,{Z:function(){return w}});var o=a(3396),r=a(7139);const i=["title"],n=["innerHTML"];function l(e,t,a,l,u,s){const d=(0,o.up)("v-card-title"),c=(0,o.up)("v-tooltip"),p=(0,o.up)("v-table"),m=(0,o.up)("v-card-text"),w=(0,o.up)("v-card"),f=(0,o.up)("v-alert"),g=(0,o.up)("v-container");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[l.gene?((0,o.wg)(),(0,o.j4)(w,{key:0,class:"mx-auto my-4","max-width":"800"},{default:(0,o.w5)((()=>[a.showTitle?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"headline"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(l.gene.approved_symbol),1)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{dense:""},{default:(0,o.w5)((()=>[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.filteredGeneDetails,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,[(0,o._)("strong",null,[(0,o._)("span",{class:"label-hover",title:e.description},(0,r.zw)(e.label),9,i),(0,o.Wm)(c,{activator:"parent",location:"start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.description),1)])),_:2},1024)])]),(0,o._)("td",{innerHTML:e.formattedValue},null,8,n)])))),128))])])),_:1})])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(f,{key:1,type:"error"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Gene not found or failed to load. ")])),_:1}))])),_:1})}var u=a(4870),s=a(3191),d=a(3636),c={props:{id:String,visibilityScope:{type:String,default:"standardView"},showTitle:{type:Boolean,default:!0}},setup(e,{emit:t}){const a=(0,u.iH)(null);(0,o.bv)((async()=>{if(e.id)try{const o=await(0,s.Xu)(e.id);a.value=o,t("gene-data-loaded",o)}catch(o){console.error("Error fetching gene:",o.message)}}));const r=(0,o.Fl)((()=>a.value?Object.entries(d.Wk).filter((([,t])=>t.visibility[e.visibilityScope])).map((([e,t])=>{const o=a.value[e];return{label:t.label,description:t.description||"",formattedValue:i(o,t)}})):[]));function i(e,t){if(null==e)return"N/A";switch(t.format){case"date":return new Date(1e3*e.seconds).toLocaleDateString();case"number":return parseFloat(e).toFixed(2);case"array":return e.join(", ");case"map":return Object.entries(e).map((([e,t])=>`${e}: ${t}`)).join(", ");case"text":return e;default:return JSON.stringify(e)}}return{gene:a,filteredGeneDetails:r}}},p=a(89);const m=(0,p.Z)(c,[["render",l],["__scopeId","data-v-bfca4502"]]);var w=m}}]);
//# sourceMappingURL=726.aec5c97a.js.map