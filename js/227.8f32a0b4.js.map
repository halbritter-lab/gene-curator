{"version":3,"file":"js/227.8f32a0b4.js","mappings":"yJAWA,MAAMA,EAAc,CAClBC,iBAAkBC,UAChB,IACE,MAAMC,EAAW,IAAIC,EAAAA,GACfC,QAAeC,EAAAA,EAAAA,IAAgBC,EAAAA,EAAMJ,SACrCK,EAAiBH,EAAOI,MAC9B,MAAMC,QAAiBC,EAAAA,EAAAA,IAAeN,EAAOI,KAAKG,OAClD,OAAOF,CACT,CAAE,MAAOG,GAEP,MADAC,QAAQD,MAAMA,GACRA,CACR,GAGFE,kBAAmBb,MAAOU,EAAOI,KAC/B,IACE,MAAMX,QAAeY,EAAAA,EAAAA,IAA+BV,EAAAA,EAAMK,EAAOI,SAC3DR,EAAiBH,EAAOI,MAC9B,MAAMC,QAAiBC,EAAAA,EAAAA,IAAeN,EAAOI,KAAKG,OAClD,OAAOF,CACT,CAAE,MAAOG,GAEP,MADAC,QAAQD,MAAMA,GACRA,CACR,GAGFK,eAAgBhB,MAAOU,EAAOI,KAC5B,IACE,MAAMX,QAAec,EAAAA,EAAAA,IAA2BZ,EAAAA,EAAMK,EAAOI,GACvDN,QAAiBC,EAAAA,EAAAA,IAAeN,EAAOI,KAAKG,OAClD,OAAOF,CACT,CAAE,MAAOG,GAEP,MADAC,QAAQD,MAAMA,GACRA,CACR,GAGFO,QAASlB,UACP,UACQkB,EAAAA,EAAAA,IAAQb,EAAAA,EAChB,CAAE,MAAOM,GAEP,MADAC,QAAQD,MAAMA,GACRA,CACR,IAIJX,eAAeM,EAAiBC,GAC9B,MAAMY,QAAqBV,EAAAA,EAAAA,IAAeF,EAAKG,OAC/C,IAAKS,EAAc,CACjB,MAAMC,QAAcC,EAAAA,EAAAA,MACdC,EAA4C,IAA9BC,OAAOC,KAAKJ,GAAOK,OACjCC,EAAOJ,EAAc,QAAU,eAE/BK,EAAAA,EAAAA,IAAW,CACfC,IAAKrB,EAAKqB,IACVlB,MAAOH,EAAKG,MACZgB,KAAMA,EACNG,UAAW,IAAIC,KACfC,UAAW,IAAID,MAEjBvB,EAAKqB,IACP,CACF,CAEA,K,wFC3DSI,MAAA,4C,8HAhBPC,EAAAA,EAAAA,IAkBWC,EAAA,CAjBTC,MAAM,MACLC,MAAOC,EAAAD,MACPE,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,MAAM,SAAS,IACvBC,WAAA,I,mBAEA,IAWS,EAXTC,EAAAA,EAAAA,IAWSC,EAAA,CAVPb,MAAA,mGAMC,C,kBAED,IAAqD,EAArDY,EAAAA,EAAAA,IAAqDE,EAAA,CAAhCC,cAAA,GAAcC,MAAM,aACzCC,EAAAA,EAAAA,GAAgE,IAAhEC,GAAgEC,EAAAA,EAAAA,IAAdd,EAAAe,SAAO,M,2BAM/D,OACEC,KAAM,gBAENC,MAAO,CACLC,KAAM,QACNC,MAAO,SAGTC,MAAO,CACLrB,MAAO,CACLsB,KAAMC,QACNC,SAAS,GAGXR,QAAS,CACPM,KAAMG,OACND,QAAS,M,QClCf,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,mYCLEnB,EAAAA,EAAAA,IAqCcoB,EAAA,CArCDC,MAAM,kDAAgD,C,kBACjE,IAgCS,EAhCTrB,EAAAA,EAAAA,IAgCSC,EAAA,CAhCDoB,MAAM,OAAOjC,MAAA,iB,mBACnB,IAAsE,EAAtEY,EAAAA,EAAAA,IAAsEsB,EAAA,CAAxDD,MAAM,4BAA0B,C,kBAAC,IAAQ,UAAR,e,OAC/CrB,EAAAA,EAAAA,IA6BcuB,EAAA,M,kBA5BZ,IA2BS,EA3BTvB,EAAAA,EAAAA,IA2BSwB,EAAA,CA3BAC,UAAMC,EAAAA,EAAAA,IAAUC,EAAAC,SAAQ,aAAEC,IAAI,gB,mBACrC,IAWgB,EAXhB7B,EAAAA,EAAAA,IAWgB8B,EAAA,CAVd1B,MAAM,UACN2B,MAAM,Q,WACGC,EAAAlE,M,qCAAAkE,EAAAlE,MAAK8B,GACdkB,KAAK,QACJmB,MAAK,CAAmBC,KAAQA,GAAC,oBAAwCA,GAAC,QAAaC,KAAKD,IAAC,uBAI9FE,QAAQ,WACRf,MAAM,Q,gCAERrB,EAAAA,EAAAA,IAWgB8B,EAAA,CAVd1B,MAAM,UACN2B,MAAM,W,WACGC,EAAA9D,S,qCAAA8D,EAAA9D,SAAQ0B,GACjBkB,KAAK,WACJmB,MAAK,CAAmBC,KAAQA,GAAC,uBAA2CA,KAAQA,GAAKA,EAAErD,QAAM,6CAKlGuD,QAAQ,Y,gCAGVpC,EAAAA,EAAAA,IAAkEqC,EAAA,CAA3DvB,KAAK,SAASV,MAAM,UAAUiB,MAAM,Q,mBAAO,IAAQ,UAAR,e,iDAMxDrB,EAAAA,EAAAA,IAA6DsC,EAAA,C,WAApCN,EAAAO,Q,qCAAAP,EAAAO,QAAO3C,GAAEY,QAAQ,kB,iCAI5CR,EAAAA,EAAAA,IAKEwC,EAAA,C,WAJSR,EAAAS,gB,qCAAAT,EAAAS,gBAAe7C,GACvB8C,MAAOV,EAAAW,cACPnC,QAASwB,EAAAY,gBACTxC,MAAO4B,EAAAa,e,qFASZ,GACEpC,KAAM,eACNqC,WAAY,CACVC,cAAaA,EAAAA,GAEfC,IAAAA,GACE,MAAO,CACLjF,OAAO,EACPkF,SAAU,CAAC,EACXV,SAAS,EACTzE,MAAO,GACPI,SAAU,GACVuE,iBAAiB,EACjBG,gBAAiB,GACjBD,cAAe,GACfE,cAAe,GAEnB,EACAK,QAAS,CACPC,YAAAA,CAAaT,EAAOlC,EAASJ,GAC3BgD,KAAKT,cAAgBD,EACrBU,KAAKR,gBAAkBpC,EACvB4C,KAAKP,cAAgBzC,EACrBgD,KAAKX,iBAAkB,CACzB,EAEA,cAAMb,GAEJ,MAAM,MAAEyB,SAAgBD,KAAKE,MAAMC,aAAaC,WAChD,GAAKH,EAEL,IAEED,KAAKb,SAAU,EACf,MAAM5E,QAAaT,EAAAA,EAAYe,kBAC7BmF,KAAKtF,MACLsF,KAAKlF,UAEPF,QAAQyF,IAAI9F,GACZyF,KAAKb,SAAU,EAEfa,KAAKD,aAAa,UAAW,0CAA2C,WAGxEO,YAAW,KACTN,KAAKO,QAAQC,KAAK,SAAS,GAC1B,IAEL,CAAE,MAAO7F,GACPqF,KAAKb,SAAU,EACfa,KAAKD,aAAa,QAASpF,EAAMyC,SAAW,8CAA+C,QAC7F,CACF,I,QCtGJ,MAAMU,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://gene-curator/./src/stores/AuthService.js","webpack://gene-curator/./src/components/LoadingDialog.vue","webpack://gene-curator/./src/components/LoadingDialog.vue?a456","webpack://gene-curator/./src/views/RegisterUser.vue","webpack://gene-curator/./src/views/RegisterUser.vue?50a9"],"sourcesContent":["// stores/AuthService.js\nimport { auth } from '@/firebase';\nimport {\n  signInWithPopup,\n  GoogleAuthProvider,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut\n} from 'firebase/auth';\nimport { createUser, getUserByEmail, getUsers } from '@/stores/usersStore'; // Import usersStore functions\n\nconst AuthService = {\n  signInWithGoogle: async () => {\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  registerWithEmail: async (email, password) => {\n    try {\n      const result = await createUserWithEmailAndPassword(auth, email, password);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  loginWithEmail: async (email, password) => {\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  signOut: async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n};\n\nasync function handleFirstLogin(user) {\n  const existingUser = await getUserByEmail(user.email);\n  if (!existingUser) {\n    const users = await getUsers();\n    const isFirstUser = Object.keys(users).length === 0;\n    const role = isFirstUser ? 'admin' : 'viewer';\n\n    await createUser({\n      uid: user.uid,\n      email: user.email,\n      role: role,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    },\n    user.uid);\n  }\n}\n\nexport default AuthService;\n","<template>\n  <v-dialog\n    width=\"200\"\n    :value=\"value\"\n    @input=\"$emit('value', false)\"\n    persistent\n  >\n    <v-card\n      style=\"\n        padding: 20px;\n        text-align: left;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n      \"\n    >\n      <v-progress-circular indeterminate color=\"primary\" />\n      <p style=\"margin-left: 20px; margin-bottom: 0\">{{ message }}</p>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nexport default {\n  name: \"LoadingDialog\",\n\n  model: {\n    prop: \"value\",\n    event: \"value\",\n  },\n\n  props: {\n    value: {\n      type: Boolean,\n      default: false,\n    },\n\n    message: {\n      type: String,\n      default: \"\",\n    },\n  },\n};\n</script>\n","import { render } from \"./LoadingDialog.vue?vue&type=template&id=de31d18e\"\nimport script from \"./LoadingDialog.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingDialog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- views/RegisterUser.vue -->\n<template>\n  <v-container class=\"fill-height d-flex align-center justify-center\">\n    <v-card class=\"pa-5\" style=\"width: 600px\">\n      <v-card-title class=\"text-center text-h5 mb-4\">Register</v-card-title>\n      <v-card-text>\n        <v-form @submit.prevent=\"register\" ref=\"registerForm\">\n          <v-text-field\n            color=\"primary\"\n            label=\"Email\"\n            v-model=\"email\"\n            type=\"email\"\n            :rules=\"[\n              (v) => !!v || 'Email is required',\n              (v) => /.+@.+/.test(v) || 'Email must be valid',\n            ]\"\n            variant=\"outlined\"\n            class=\"mb-2\"\n          ></v-text-field>\n          <v-text-field\n            color=\"primary\"\n            label=\"Password\"\n            v-model=\"password\"\n            type=\"password\"\n            :rules=\"[\n              (v) => !!v || 'Password is required',\n              (v) => !!v && v.length >= 6 || 'Password must be at least 6 characters',\n\n            ]\"\n            variant=\"outlined\"\n          ></v-text-field>\n\n          <v-btn type=\"submit\" color=\"primary\" class=\"mt-4\">Register</v-btn>\n        </v-form>\n      </v-card-text>\n    </v-card>\n\n    <!-- loading dialog component -->\n    <loading-dialog v-model=\"loading\" message=\"Please wait...\" />\n  </v-container>\n\n  <!-- Message Snackbar for feedback -->\n  <MessageSnackbar\n    v-model=\"snackbarVisible\"\n    :title=\"snackbarTitle\"\n    :message=\"snackbarMessage\"\n    :color=\"snackbarColor\"\n  />\n\n</template>\n\n<script>\nimport AuthService from \"@/stores/AuthService\";\nimport LoadingDialog from \"@/components/LoadingDialog\";\n\nexport default {\n  name: \"RegisterUser\",\n  components: {\n    LoadingDialog,\n  },\n  data() {\n    return {\n      error: false,\n      errorVal: {},\n      loading: false,\n      email: \"\",\n      password: \"\",\n      snackbarVisible: false,\n      snackbarMessage: '',\n      snackbarTitle: '',\n      snackbarColor: '',\n    };\n  },\n  methods: {\n    showSnackbar(title, message, color) {\n      this.snackbarTitle = title;\n      this.snackbarMessage = message;\n      this.snackbarColor = color;\n      this.snackbarVisible = true;\n    },\n\n    async register() {\n      // Validate form\n      const { valid } = await this.$refs.registerForm.validate();\n      if (!valid) return;\n\n      try {\n        // Register user\n        this.loading = true;\n        const user = await AuthService.registerWithEmail(\n          this.email,\n          this.password\n        );\n        console.log(user);\n        this.loading = false;\n        // Handle successful registration\n        this.showSnackbar('Success', 'Registration successful! Redirecting...', 'success');\n\n        // Redirect after 3 seconds\n        setTimeout(() => {\n          this.$router.push('/login');\n        }, 3000);\n\n      } catch (error) {\n        this.loading = false;\n        this.showSnackbar('Error', error.message || 'There was an error registering your account', 'error');\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./RegisterUser.vue?vue&type=template&id=43418a18\"\nimport script from \"./RegisterUser.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterUser.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["AuthService","signInWithGoogle","async","provider","GoogleAuthProvider","result","signInWithPopup","auth","handleFirstLogin","user","userData","getUserByEmail","email","error","console","registerWithEmail","password","createUserWithEmailAndPassword","loginWithEmail","signInWithEmailAndPassword","signOut","existingUser","users","getUsers","isFirstUser","Object","keys","length","role","createUser","uid","createdAt","Date","updatedAt","style","_createBlock","_component_v_dialog","width","value","$props","onInput","_cache","$event","_ctx","$emit","persistent","_createVNode","_component_v_card","_component_v_progress_circular","indeterminate","color","_createElementVNode","_hoisted_1","_toDisplayString","message","name","model","prop","event","props","type","Boolean","default","String","__exports__","render","_component_v_container","class","_component_v_card_title","_component_v_card_text","_component_v_form","onSubmit","_withModifiers","$options","register","ref","_component_v_text_field","label","$data","rules","v","test","variant","_component_v_btn","_component_loading_dialog","loading","_component_MessageSnackbar","snackbarVisible","title","snackbarTitle","snackbarMessage","snackbarColor","components","LoadingDialog","data","errorVal","methods","showSnackbar","this","valid","$refs","registerForm","validate","log","setTimeout","$router","push"],"sourceRoot":""}