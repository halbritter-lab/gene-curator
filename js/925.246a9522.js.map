{"version":3,"file":"js/925.246a9522.js","mappings":"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","sources":["webpack://gene-curator/./src/stores/AuthService.js","webpack://gene-curator/./src/views/LoginUser.vue","webpack://gene-curator/./src/views/LoginUser.vue?f564"],"sourcesContent":["// stores/AuthService.js\nimport { auth } from '@/firebase';\nimport {\n  signInWithPopup,\n  GoogleAuthProvider,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut\n} from 'firebase/auth';\nimport { createUser, getUserByEmail, getUsers } from '@/stores/usersStore'; // Import usersStore functions\n\nconst AuthService = {\n  signInWithGoogle: async () => {\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  registerWithEmail: async (email, password) => {\n    try {\n      const result = await createUserWithEmailAndPassword(auth, email, password);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  loginWithEmail: async (email, password) => {\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  signOut: async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n};\n\nasync function handleFirstLogin(user) {\n  const existingUser = await getUserByEmail(user.email);\n  if (!existingUser) {\n    const users = await getUsers();\n    const isFirstUser = Object.keys(users).length === 0;\n    const role = isFirstUser ? 'admin' : 'viewer';\n\n    await createUser({\n      uid: user.uid,\n      email: user.email,\n      role: role,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    },\n    user.uid);\n  }\n}\n\nexport default AuthService;\n","<!-- views/LoginUser.vue -->\n<template>\n  <v-container>\n    <v-card>\n      <v-card-title>Login</v-card-title>\n      <v-card-text>\n        <v-form>\n          <v-text-field \n            label=\"Email\" \n            v-model=\"email\" \n            type=\"email\" \n            required\n          ></v-text-field>\n          <v-text-field \n            label=\"Password\" \n            v-model=\"password\" \n            type=\"password\" \n            required\n          ></v-text-field>\n\n          <v-btn @click=\"loginWithEmail\">Login</v-btn>\n          <!-- New Registration Link -->\n          <v-btn text @click=\"navigateToRegister\">\n            Don't have an account? Register\n          </v-btn>\n          \n          <!-- Visual Divider -->\n          <div class=\"login-divider\">\n            OR\n          </div>\n\n          <v-btn @click=\"signInWithGoogle\" color=\"primary\">Login with Google</v-btn>\n\n        </v-form>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n\n\n<script>\nimport AuthService from '@/stores/AuthService';\nimport { useRouter } from 'vue-router'; // Import useRouter\n\nexport default {\n  name: 'LoginUser',\n  data() {\n    return {\n      email: '',\n      password: ''\n    };\n  },\n  setup() {\n    const router = useRouter(); // Use the useRouter hook\n\n    return { router }; // Return router to use it inside methods\n  },\n  methods: {\n    async loginWithEmail() {\n      try {\n        const user = await AuthService.loginWithEmail(this.email, this.password);\n        // Handle successful login\n        this.saveUserToLocalStorage(user);\n        this.router.push('/'); // Redirect to home page after successful login\n      } catch (error) {\n        // Handle login error\n        console.error(error);\n      }\n    },\n    async signInWithGoogle() {\n      try {\n        const user = await AuthService.signInWithGoogle();\n        // Handle successful login\n        this.saveUserToLocalStorage(user);\n        this.router.push('/'); // Redirect to home page after successful login\n      } catch (error) {\n        // Handle login error\n        console.error(error);\n      }\n    },\n    navigateToRegister() {\n      this.router.push('/register'); // Add method to navigate to the registration view\n    },\n    saveUserToLocalStorage(user) {\n      if (user) {\n        localStorage.setItem('user', JSON.stringify({\n          email: user.email,\n          displayName: user.displayName || user.email\n        }));\n        localStorage.setItem('isLoggedIn', 'true');\n      }\n    }\n  }\n};\n</script>\n\n\n<style>\n  /* Updated style for the visual divider */\n  .login-divider {\n    text-align: center;\n    margin: 20px 0;\n    color: #757575;\n    display: flex;\n    align-items: center; /* Vertically align text and Google button */\n  }\n</style>\n\n","import { render } from \"./LoginUser.vue?vue&type=template&id=44562f29\"\nimport script from \"./LoginUser.vue?vue&type=script&lang=js\"\nexport * from \"./LoginUser.vue?vue&type=script&lang=js\"\n\nimport \"./LoginUser.vue?vue&type=style&index=0&id=44562f29&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["AuthService","signInWithGoogle","async","provider","GoogleAuthProvider","result","signInWithPopup","auth","handleFirstLogin","user","userData","getUserByEmail","email","error","console","registerWithEmail","password","createUserWithEmailAndPassword","loginWithEmail","signInWithEmailAndPassword","signOut","existingUser","users","getUsers","isFirstUser","Object","keys","length","role","createUser","uid","createdAt","Date","updatedAt","_createElementVNode","class","_createBlock","_component_v_container","_createVNode","_component_v_card","_component_v_card_title","_component_v_card_text","_component_v_form","_component_v_text_field","label","$data","$event","type","required","_component_v_btn","onClick","$options","text","navigateToRegister","_hoisted_1","color","name","data","setup","router","useRouter","methods","this","saveUserToLocalStorage","push","localStorage","setItem","JSON","stringify","displayName","__exports__","render"],"sourceRoot":""}