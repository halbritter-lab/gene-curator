{"version":3,"file":"js/996.4cf3d2c5.js","mappings":"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","sources":["webpack://gene-curator/./src/stores/AuthService.js","webpack://gene-curator/./src/views/RegisterUser.vue","webpack://gene-curator/./src/views/RegisterUser.vue?50a9"],"sourcesContent":["// stores/AuthService.js\nimport { auth } from '@/firebase';\nimport {\n  signInWithPopup,\n  GoogleAuthProvider,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut\n} from 'firebase/auth';\nimport { createUser, getUserByEmail, getUsers } from '@/stores/usersStore'; // Import usersStore functions\n\nconst AuthService = {\n  signInWithGoogle: async () => {\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  registerWithEmail: async (email, password) => {\n    try {\n      const result = await createUserWithEmailAndPassword(auth, email, password);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  loginWithEmail: async (email, password) => {\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  signOut: async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n};\n\nasync function handleFirstLogin(user) {\n  const existingUser = await getUserByEmail(user.email);\n  if (!existingUser) {\n    const users = await getUsers();\n    const isFirstUser = Object.keys(users).length === 0;\n    const role = isFirstUser ? 'admin' : 'viewer';\n\n    await createUser({\n      uid: user.uid,\n      email: user.email,\n      role: role,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    },\n    user.uid);\n  }\n}\n\nexport default AuthService;\n","<!-- views/RegisterUser.vue -->\n<template>\n  <v-container>\n    <v-card>\n      <v-card-title>Register</v-card-title>\n      <v-card-text>\n        <v-form>\n          <v-text-field \n            label=\"Email\" \n            v-model=\"email\" \n            type=\"email\" \n            required\n          ></v-text-field>\n          <v-text-field \n            label=\"Password\" \n            v-model=\"password\" \n            type=\"password\" \n            required\n          ></v-text-field>\n          <v-btn @click=\"register\">Register</v-btn>\n        </v-form>\n      </v-card-text>\n    </v-card>\n  </v-container>\n\n  <!-- Snackbar for registration feedback -->\n  <v-snackbar\n    v-model=\"snackbarVisible\"\n    :color=\"snackbarColor\"\n    :timeout=\"6000\"\n  >\n    {{ snackbarMessage }}\n  </v-snackbar>\n\n</template>\n\n<script>\nimport AuthService from '@/stores/AuthService';\n\nexport default {\n  name: 'RegisterUser',\n  data() {\n    return {\n      email: '',\n      password: '',\n      // Snackbar data\n      snackbarVisible: false,\n      snackbarMessage: '',\n      snackbarColor: 'info'\n    };\n  },\n  methods: {\n    displaySnackbar(message, color) {\n      this.snackbarMessage = message;\n      this.snackbarColor = color;\n      this.snackbarVisible = true;\n    },\n\n    async register() {\n      try {\n        const user = await AuthService.registerWithEmail(this.email, this.password);\n        console.log(user);\n        // Handle successful registration\n        this.displaySnackbar('Registration successful! Redirecting...', 'success');\n\n        // Redirect after 3 seconds\n        setTimeout(() => {\n          this.$router.push('/login');\n        }, 3000);\n\n      } catch (error) {\n        // Handle registration error\n        this.displaySnackbar(error.message, 'error');\n      }\n    }\n  }\n};\n</script>\n","import { render } from \"./RegisterUser.vue?vue&type=template&id=f00f5166\"\nimport script from \"./RegisterUser.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterUser.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["AuthService","signInWithGoogle","async","provider","GoogleAuthProvider","result","signInWithPopup","auth","handleFirstLogin","user","userData","getUserByEmail","email","error","console","registerWithEmail","password","createUserWithEmailAndPassword","loginWithEmail","signInWithEmailAndPassword","signOut","existingUser","users","getUsers","isFirstUser","Object","keys","length","role","createUser","uid","createdAt","Date","updatedAt","_createVNode","_component_v_container","_component_v_card","_component_v_card_title","_component_v_card_text","_component_v_form","_component_v_text_field","label","$data","$event","type","required","_component_v_btn","onClick","$options","register","_component_v_snackbar","snackbarVisible","color","snackbarColor","timeout","snackbarMessage","name","data","methods","displaySnackbar","message","this","log","setTimeout","$router","push","__exports__","render"],"sourceRoot":""}