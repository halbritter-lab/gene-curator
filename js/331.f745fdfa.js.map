{"version":3,"file":"js/331.f745fdfa.js","mappings":"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","sources":["webpack://gene-curator/./src/components/DataDisplayTable.vue","webpack://gene-curator/./src/components/DataDisplayTable.vue?2290","webpack://gene-curator/./src/views/UserAdminView.vue","webpack://gene-curator/./src/views/UserAdminView.vue?fbb1"],"sourcesContent":["<!-- components/DataDisplayTable.vue -->\n<template>\n  <v-container>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      v-model:items-per-page=\"itemsPerPage\"\n      :server-items-length=\"totalItems\"\n      :loading=\"loading\"\n      class=\"elevation-1\"\n      density=\"compact\"\n    >\n      <!-- Header slot -->\n      <template v-for=\"h in headers\" v-slot:[`header.${h.value}`]=\"{ header }\" :key=\"h.value\">\n            <span>{{h.title}}</span>\n            <v-tooltip\n              v-bind:header=\"header\"\n              v-if=\"h.description\"\n              activator=\"parent\"\n              location=\"top\"\n            >\n              {{ h.description }}\n            </v-tooltip>\n      </template>\n\n      <!-- Default slot for items -->\n      <template v-for=\"column in config.columns\" v-slot:[`item.${column.name}`]=\"{ item }\" :key=\"column.name\">\n        <!-- Handle text formatting -->\n        <div v-if=\"column.type === 'text'\">\n          {{ item[column.name] }}\n        </div>\n        <!-- Handle date formatting -->\n        <div v-else-if=\"column.type === 'date'\">\n          {{ formatTimestamp(item[column.name]) }}\n        </div>\n        <!-- Handle link formatting -->\n        <router-link v-else-if=\"column.type === 'link'\" :to=\"column.to(item)\">\n          {{ item[column.name] }}\n        </router-link>\n        <!-- Handle boolean formatting -->\n        <template v-else-if=\"column.type === 'slot'\">\n          <slot :name=\"column.slotName\" :item=\"item\"></slot>\n        </template>\n      </template>\n    </v-data-table>\n    \n    <!-- Modal slot -->\n    <slot name=\"modal\"></slot>\n\n    <!-- Pagination controls -->\n    <v-pagination\n      v-model=\"page\"\n      :length=\"totalPages\"\n      @update:page=\"$emit('update-page', page)\"\n    ></v-pagination>\n  </v-container>\n</template>\n\n<script>\nimport { ref, computed, watch } from 'vue';\n\n/**\n * A generic data table component for displaying items with configurable columns\n * and pagination.\n */\nexport default {\n  props: {\n    headers: Array, // The headers for the table\n    items: Array, // The items to display in the table\n    config: Object, // Configuration for the columns\n    totalItems: Number, // Total number of items for pagination\n    loading: Boolean, // Loading state\n  },\n  setup(props, { emit }) {\n    const page = ref(1); // Current page number\n    const itemsPerPage = ref(10); // Number of items per page\n\n    // Compute the total number of pages\n    const totalPages = computed(() => Math.ceil(props.totalItems / itemsPerPage.value));\n\n    // Method to format Firestore Timestamp\n    const formatTimestamp = (timestamp) => {\n      if (!timestamp) return '';\n      const date = new Date(timestamp.seconds * 1000);\n      return date.toLocaleDateString(); // Adjust format as needed\n    };\n\n    // Watch for changes in page and itemsPerPage and emit events\n    watch(page, () => {\n      emit('page-changed', page.value);\n    });\n\n    watch(itemsPerPage, () => {\n      emit('items-per-page-changed', itemsPerPage.value);\n    });\n\n    return {\n      page,\n      itemsPerPage,\n      totalPages,\n      formatTimestamp\n    };\n  },\n};\n</script>\n","import { render } from \"./DataDisplayTable.vue?vue&type=template&id=0c13b056\"\nimport script from \"./DataDisplayTable.vue?vue&type=script&lang=js\"\nexport * from \"./DataDisplayTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- views/UserAdminView.vue -->\n<template>\n  <v-container>\n    <h1>User Administration</h1>\n    <DataDisplayTable\n      :headers=\"headers\"\n      :items=\"paginatedUsers\"\n      :config=\"tableConfig\"\n      :total-items=\"totalUsers\"\n      :loading=\"loading\"\n    >\n      <!-- Role slot for role selection -->\n      <template v-slot:role-slot=\"{ item }\">\n        <v-select\n          :items=\"['admin', 'curator', 'viewer']\"\n          v-model=\"item.role\"\n          @update:modelValue=\"(newRole) => updateUserRole(item, newRole)\"\n          dense\n        ></v-select>\n      </template>\n    </DataDisplayTable>\n\n  </v-container>\n</template>\n\n\n<script>\nimport { ref, computed, onMounted } from 'vue';\nimport DataDisplayTable from '@/components/DataDisplayTable.vue';\nimport { getUsers, updateUser } from '@/stores/usersStore';\nimport { userRolesConfig } from '@/config/userRolesConfig';\n\nexport default {\n  name: 'UserAdminView',\n  components: {\n    DataDisplayTable\n  },\n  setup() {\n    const users = ref({});\n    const loading = ref(false);\n    const page = ref(1);\n    const itemsPerPage = ref(10);\n\n    // Fetch users from Firestore\n    onMounted(async () => {\n      loading.value = true;\n      users.value = await getUsers();\n      loading.value = false;\n    });\n\n    const totalUsers = computed(() => Object.keys(users.value).length);\n\n    const paginatedUsers = computed(() => {\n    const start = (page.value - 1) * itemsPerPage.value;\n    const end = start + itemsPerPage.value;\n    return Object.values(users.value).slice(start, end);\n    });\n\n    const headers = [\n    { title: 'User ID', value: 'uid' },\n    { title: 'Email', value: 'email' },\n    { title: 'Created Date', value: 'createdAt' },\n    { title: 'Role', value: 'role' }\n    ];\n\n    const tableConfig = {\n      columns: [\n          {\n          name: 'name',\n          type: 'text'\n          },\n          {\n          name: 'email',\n          type: 'text'\n          },\n          {\n          name: 'createdAt',\n          type: 'date',\n          // Additional formatting for the date can be added here\n          },\n          {\n          name: 'role',\n          type: 'slot',\n          slotName: 'role-slot'\n          }\n      ]\n    };\n\n    // Method to update user role\n    const updateUserRole = async (user, newRole) => {\n      try {\n        const permissions = userRolesConfig[newRole];\n        await updateUser(user.id, { role: newRole, permissions });\n        user.role = newRole; // Update the local state\n      } catch (error) {\n        console.error('Error updating user role:', error);\n      }\n    };\n\n    return {\n      users,\n      loading,\n      headers,\n      paginatedUsers,\n      totalUsers,\n      tableConfig,\n      updateUserRole\n    };\n  },\n};\n</script>\n","import { render } from \"./UserAdminView.vue?vue&type=template&id=620681d8\"\nimport script from \"./UserAdminView.vue?vue&type=script&lang=js\"\nexport * from \"./UserAdminView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_v_container","_createVNode","_component_v_data_table","headers","$props","items","$setup","itemsPerPage","$event","totalItems","loading","class","density","h","value","header","_createElementVNode","_toDisplayString","title","description","_component_v_tooltip","activator","location","config","columns","column","name","item","type","_createElementBlock","_hoisted_1","_hoisted_2","formatTimestamp","_component_router_link","to","_renderSlot","_ctx","$slots","slotName","_component_v_pagination","page","length","totalPages","_cache","$emit","props","Array","Object","Number","Boolean","setup","emit","ref","computed","Math","ceil","timestamp","date","Date","seconds","toLocaleDateString","watch","__exports__","render","_component_DataDisplayTable","paginatedUsers","tableConfig","totalUsers","_withCtx","_component_v_select","role","newRole","updateUserRole","dense","components","DataDisplayTable","users","onMounted","async","getUsers","keys","start","end","values","slice","user","permissions","userRolesConfig","updateUser","id","error","console"],"sourceRoot":""}