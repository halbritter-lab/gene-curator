"use strict";(self["webpackChunkgene_curator"]=self["webpackChunkgene_curator"]||[]).push([[896],{4157:function(e,t,a){a.d(t,{FH:function(){return s},VG:function(){return i},lO:function(){return l},pK:function(){return r},rj:function(){return d}});var n=a(4287),o=a(6056);const i=async()=>{const e=await(0,n.PL)((0,n.hJ)(o.db,"curations"));let t={};return e.forEach((e=>{t[e.id]=e.data()})),t},r=async e=>{const t=await(0,n.ET)((0,n.hJ)(o.db,"curations"),{...e,createdAt:n.EK.fromDate(new Date),updatedAt:n.EK.fromDate(new Date)});return t.id},l=async(e,t)=>{const a=(0,n.JU)(o.db,"curations",e);await(0,n.r7)(a,{...t,updatedAt:n.EK.fromDate(new Date)})},s=async e=>{const t=(0,n.JU)(o.db,"curations",e);await(0,n.oe)(t)},d=async e=>{const t=(0,n.hJ)(o.db,"curations"),a=(0,n.IO)(t,(0,n.ar)("approved_symbol","==",e)),i=(0,n.IO)(t,(0,n.ar)("hgnc_id","==",e)),r=await(0,n.PL)(a);let l=null;if(r.forEach((e=>{e.exists()&&(l={id:e.id,...e.data()})})),!l){const e=await(0,n.PL)(i);e.forEach((e=>{e.exists()&&(l={id:e.id,...e.data()})}))}return l}},7385:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(3396),o=a(7139);const i={key:0},r={key:1};function l(e,t,a,l,s,d){const u=(0,n.up)("v-tooltip"),c=(0,n.up)("router-link"),m=(0,n.up)("v-data-table"),p=(0,n.up)("v-pagination"),g=(0,n.up)("v-container");return(0,n.wg)(),(0,n.j4)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{headers:a.headers,items:a.items,"items-per-page":l.itemsPerPage,"onUpdate:itemsPerPage":t[0]||(t[0]=e=>l.itemsPerPage=e),"server-items-length":a.totalItems,loading:a.loading,class:"elevation-1",density:"compact"},(0,n.Nv)({_:2},[(0,n.Ko)(a.headers,(e=>({name:`header.${e.value}`,fn:(0,n.w5)((({header:t})=>[(0,n._)("span",null,(0,o.zw)(e.title),1),e.description?((0,n.wg)(),(0,n.j4)(u,{key:0,header:t,activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.description),1)])),_:2},1032,["header"])):(0,n.kq)("",!0)]))}))),(0,n.Ko)(a.config.columns,(t=>({name:`item.${t.name}`,fn:(0,n.w5)((({item:a})=>["text"===t.type?((0,n.wg)(),(0,n.iD)("div",i,(0,o.zw)(a[t.name]),1)):"date"===t.type?((0,n.wg)(),(0,n.iD)("div",r,(0,o.zw)(l.formatTimestamp(a[t.name])),1)):"link"===t.type?((0,n.wg)(),(0,n.j4)(c,{key:2,to:t.to(a)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(a[t.name]),1)])),_:2},1032,["to"])):"slot"===t.type?(0,n.WI)(e.$slots,t.slotName,{key:3,item:a}):(0,n.kq)("",!0)]))})))]),1032,["headers","items","items-per-page","server-items-length","loading"]),(0,n.WI)(e.$slots,"modal"),(0,n.Wm)(p,{modelValue:l.page,"onUpdate:modelValue":t[1]||(t[1]=e=>l.page=e),length:l.totalPages,"onUpdate:page":t[2]||(t[2]=t=>e.$emit("update-page",l.page))},null,8,["modelValue","length"])])),_:3})}var s=a(4870),d={props:{headers:Array,items:Array,config:Object,totalItems:Number,loading:Boolean},setup(e,{emit:t}){const a=(0,s.iH)(1),o=(0,s.iH)(10),i=(0,n.Fl)((()=>Math.ceil(e.totalItems/o.value))),r=e=>{if(!e)return"";const t=new Date(1e3*e.seconds);return t.toLocaleDateString()};return(0,n.YP)(a,(()=>{t("page-changed",a.value)})),(0,n.YP)(o,(()=>{t("items-per-page-changed",o.value)})),{page:a,itemsPerPage:o,totalPages:i,formatTimestamp:r}}},u=a(89);const c=(0,u.Z)(d,[["render",l]]);var m=c},8896:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(3396);const o=e=>((0,n.dD)("data-v-119114c1"),e=e(),(0,n.Cn)(),e),i=o((()=>(0,n._)("h1",null,"Curation Table",-1)));function r(e,t,a,o,r,l){const s=(0,n.up)("v-btn"),d=(0,n.up)("DataDisplayTable"),u=(0,n.up)("v-container");return(0,n.wg)(),(0,n.j4)(u,null,{default:(0,n.w5)((()=>[i,(0,n.Wm)(d,{headers:o.headers,items:o.paginatedItems,config:o.tableConfig,"total-items":o.totalItems,loading:o.loading,onAction:o.handleAction,onPageChanged:o.updatePage,onItemsPerPageChanged:o.updateItemsPerPage},{"action-slot":(0,n.w5)((({item:t})=>[(0,n.Wm)(s,{color:"primary",onClick:a=>e.openModal(t)},{default:(0,n.w5)((()=>[(0,n.Uk)("Edit")])),_:2},1032,["onClick"]),(0,n.Wm)(s,{color:"error",onClick:e=>o.deleteItem(t)},{default:(0,n.w5)((()=>[(0,n.Uk)("Delete")])),_:2},1032,["onClick"])])),modal:(0,n.w5)((()=>[])),_:1},8,["headers","items","config","total-items","loading","onAction","onPageChanged","onItemsPerPageChanged"])])),_:1})}var l=a(4870),s=a(7385),d=a(4157),u={name:"CurationTable",components:{DataDisplayTable:s.Z},setup(){const e=(0,l.iH)({}),t=(0,l.iH)(!1),a=(0,l.iH)(1),o=(0,l.iH)(10),i=(0,n.Fl)((()=>Object.keys(e.value).length)),r=(0,n.Fl)((()=>{const t=(a.value-1)*o.value,n=t+o.value;return Object.values(e.value).slice(t,n)})),s=[{title:"Approved Symbol",value:"approved_symbol"},{title:"Verdict",value:"verdict"},{title:"Created",value:"createdAt"}],u={columns:[{name:"approved_symbol",type:"link",to:e=>`/gene/${e.hgnc_id}`},{name:"createdAt",type:"date"}]},c=e=>{a.value=e},m=e=>{o.value=e},p=(e,t)=>{console.log(`Action: ${e} for item:`,t)},g=async e=>{await(0,d.FH)(e.id)};return(0,n.bv)((async()=>{t.value=!0,e.value=await(0,d.VG)(),console.log("Curations:",e.value),t.value=!1})),{headers:s,paginatedItems:r,tableConfig:u,totalItems:i,loading:t,updatePage:c,updateItemsPerPage:m,handleAction:p,deleteItem:g}}},c=a(89);const m=(0,c.Z)(u,[["render",r],["__scopeId","data-v-119114c1"]]);var p=m}}]);
//# sourceMappingURL=896.9dd9d6db.js.map