{"version":3,"file":"js/686.0de47ce0.js","mappings":"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","sources":["webpack://gene-curator/./src/stores/AuthService.js","webpack://gene-curator/./src/components/ErrorDialog.vue","webpack://gene-curator/./src/components/ErrorDialog.vue?aa44","webpack://gene-curator/./src/components/LoadingDialog.vue","webpack://gene-curator/./src/components/LoadingDialog.vue?a456","webpack://gene-curator/./src/views/RegisterUser.vue","webpack://gene-curator/./src/views/RegisterUser.vue?50a9"],"sourcesContent":["// stores/AuthService.js\nimport { auth } from '@/firebase';\nimport {\n  signInWithPopup,\n  GoogleAuthProvider,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut\n} from 'firebase/auth';\nimport { createUser, getUserByEmail, getUsers } from '@/stores/usersStore'; // Import usersStore functions\n\nconst AuthService = {\n  signInWithGoogle: async () => {\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  registerWithEmail: async (email, password) => {\n    try {\n      const result = await createUserWithEmailAndPassword(auth, email, password);\n      await handleFirstLogin(result.user);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  loginWithEmail: async (email, password) => {\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      const userData = await getUserByEmail(result.user.email); // Retrieve user data\n      return userData;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  },\n\n  signOut: async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n};\n\nasync function handleFirstLogin(user) {\n  const existingUser = await getUserByEmail(user.email);\n  if (!existingUser) {\n    const users = await getUsers();\n    const isFirstUser = Object.keys(users).length === 0;\n    const role = isFirstUser ? 'admin' : 'viewer';\n\n    await createUser({\n      uid: user.uid,\n      email: user.email,\n      role: role,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    },\n    user.uid);\n  }\n}\n\nexport default AuthService;\n","<template>\n  <v-dialog width=\"470\">\n    <v-card style=\"padding: 10px 0\">\n      <v-card-title\n        style=\"font-family: google-sans, sans-serif; font-size: 24px\"\n      >\n        {{ error.title }}\n      </v-card-title>\n      <v-card-text>\n        {{ error.message }}\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn color=\"primary\" elevation=\"0\" @click=\"$emit('value', false)\"\n          >Ok</v-btn\n        >\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nexport default {\n  name: \"ErrorDialog\",\n\n  props: {\n    error: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n};\n</script>\n","import { render } from \"./ErrorDialog.vue?vue&type=template&id=ccef2fcc\"\nimport script from \"./ErrorDialog.vue?vue&type=script&lang=js\"\nexport * from \"./ErrorDialog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <v-dialog\n    width=\"200\"\n    :value=\"value\"\n    @input=\"$emit('value', false)\"\n    persistent\n  >\n    <v-card\n      style=\"\n        padding: 20px;\n        text-align: left;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n      \"\n    >\n      <v-progress-circular indeterminate color=\"primary\" />\n      <p style=\"margin-left: 20px; margin-bottom: 0\">{{ message }}</p>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nexport default {\n  name: \"LoadingDialog\",\n\n  model: {\n    prop: \"value\",\n    event: \"value\",\n  },\n\n  props: {\n    value: {\n      type: Boolean,\n      default: false,\n    },\n\n    message: {\n      type: String,\n      default: \"\",\n    },\n  },\n};\n</script>\n","import { render } from \"./LoadingDialog.vue?vue&type=template&id=de31d18e\"\nimport script from \"./LoadingDialog.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingDialog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- views/RegisterUser.vue -->\n<template>\n  <v-container class=\"fill-height d-flex align-center justify-center\">\n    <v-card class=\"pa-5\" style=\"width: 600px\">\n      <v-card-title class=\"text-center text-h5 mb-4\">Register</v-card-title>\n      <v-card-text>\n        <v-form @submit.prevent=\"register\" ref=\"registerForm\">\n          <v-text-field\n            color=\"primary\"\n            label=\"Email\"\n            v-model=\"email\"\n            type=\"email\"\n            :rules=\"[\n              (v) => !!v || 'Email is required',\n              (v) => /.+@.+/.test(v) || 'Email must be valid',\n            ]\"\n            variant=\"outlined\"\n            class=\"mb-2\"\n          ></v-text-field>\n          <v-text-field\n            color=\"primary\"\n            label=\"Password\"\n            v-model=\"password\"\n            type=\"password\"\n            :rules=\"[\n              (v) => !!v || 'Password is required',\n              (v) => !!v && v.length >= 6 || 'Password must be at least 6 characters',\n\n            ]\"\n            variant=\"outlined\"\n          ></v-text-field>\n\n          <v-btn type=\"submit\" color=\"primary\" class=\"mt-4\">Register</v-btn>\n        </v-form>\n      </v-card-text>\n    </v-card>\n\n    <error-dialog\n      v-model=\"error\"\n      :error=\"errorVal\"\n      @value=\"error = $event\"\n    ></error-dialog>\n    <loading-dialog v-model=\"loading\" message=\"Please wait...\" />\n  </v-container>\n\n  <!-- Snackbar for registration feedback -->\n  <v-snackbar\n    v-model=\"snackbarVisible\"\n    :color=\"snackbarColor\"\n    :timeout=\"6000\"\n  >\n    {{ snackbarMessage }}\n  </v-snackbar>\n\n</template>\n\n<script>\nimport AuthService from \"@/stores/AuthService\";\nimport ErrorDialog from \"@/components/ErrorDialog\";\nimport LoadingDialog from \"@/components/LoadingDialog\";\n\nexport default {\n  name: \"RegisterUser\",\n  components: {\n    ErrorDialog,\n    LoadingDialog,\n  },\n  data() {\n    return {\n      error: false,\n      errorVal: {},\n      loading: false,\n      email: \"\",\n      password: \"\",\n      snackbarVisible: false,\n      snackbarMessage: '',\n      snackbarColor: '',\n    };\n  },\n  methods: {\n    displaySnackbar(message, color) {\n      this.snackbarMessage = message;\n      this.snackbarColor = color;\n      this.snackbarVisible = true;\n    },\n\n    async register() {\n      // Validate form\n      const { valid } = await this.$refs.registerForm.validate();\n      if (!valid) return;\n\n      try {\n        // Register user\n        this.loading = true;\n        const user = await AuthService.registerWithEmail(\n          this.email,\n          this.password\n        );\n        console.log(user);\n        this.loading = false;\n        // Handle successful registration\n        this.displaySnackbar('Registration successful! Redirecting...', 'success');\n\n        // Redirect after 3 seconds\n        setTimeout(() => {\n          this.$router.push('/login');\n        }, 3000);\n\n      } catch (error) {\n       this.error = true;\n        this.errorVal = {\n          title: \"Error\",\n          description: \"There was an error registering your account\",\n        };\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./RegisterUser.vue?vue&type=template&id=f14f1fa2\"\nimport script from \"./RegisterUser.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterUser.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["AuthService","signInWithGoogle","async","provider","GoogleAuthProvider","result","signInWithPopup","auth","handleFirstLogin","user","userData","getUserByEmail","email","error","console","registerWithEmail","password","createUserWithEmailAndPassword","loginWithEmail","signInWithEmailAndPassword","signOut","existingUser","users","getUsers","isFirstUser","Object","keys","length","role","createUser","uid","createdAt","Date","updatedAt","_createBlock","_component_v_dialog","width","_createVNode","_component_v_card","style","_component_v_card_title","$props","title","_component_v_card_text","message","_component_v_card_actions","_component_v_spacer","_component_v_btn","color","elevation","onClick","_cache","$event","_ctx","$emit","name","props","type","default","__exports__","render","value","onInput","persistent","_component_v_progress_circular","indeterminate","_createElementVNode","_hoisted_1","_toDisplayString","model","prop","event","Boolean","String","_component_v_container","class","_component_v_form","onSubmit","_withModifiers","$options","register","ref","_component_v_text_field","label","$data","rules","v","test","variant","_component_error_dialog","errorVal","onValue","_component_loading_dialog","loading","_component_v_snackbar","snackbarVisible","snackbarColor","timeout","snackbarMessage","components","ErrorDialog","LoadingDialog","data","methods","displaySnackbar","this","valid","$refs","registerForm","validate","log","setTimeout","$router","push","description"],"sourceRoot":""}