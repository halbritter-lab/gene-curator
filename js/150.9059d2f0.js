"use strict";(self["webpackChunkgene_curator"]=self["webpackChunkgene_curator"]||[]).push([[150],{1429:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(3396);const o=e=>((0,l.dD)("data-v-20e0cabe"),e=e(),(0,l.Cn)(),e),n=o((()=>(0,l._)("h1",null,"Pre-Curation Table",-1)));function i(e,a,t,o,i,r){const s=(0,l.up)("v-btn"),u=(0,l.up)("v-icon"),c=(0,l.up)("CurationModal"),d=(0,l.up)("DataDisplayTable"),m=(0,l.up)("ConfirmationModal"),p=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(p,null,{default:(0,l.w5)((()=>[n,(0,l.Wm)(d,{headers:o.headers,items:o.paginatedItems,config:o.tableConfig,"total-items":o.totalItems,loading:o.loading,onPageChanged:o.updatePage,onItemsPerPageChanged:o.updateItemsPerPage},(0,l.Nv)({modal:(0,l.w5)((()=>[(0,l.Wm)(c,{item:o.selectedItem,open:o.showModal,context:"precuration",onClose:o.closeModal,onSave:o.saveData},null,8,["item","open","onClose","onSave"])])),_:2},[o.isCuratorOrAdmin?{name:"action-slot",fn:(0,l.w5)((({item:e})=>[(0,l.Wm)(s,{color:"primary",onClick:a=>o.openModal(e)},{default:(0,l.w5)((()=>[(0,l.Uk)("Edit")])),_:2},1032,["onClick"]),(0,l.Wm)(s,{color:"green",onClick:a=>o.approveItem(e)},{default:(0,l.w5)((()=>[e.approvedBy?((0,l.wg)(),(0,l.j4)(u,{key:0,left:""},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-check")])),_:1})):(0,l.kq)("",!0),(0,l.Uk)(" Approve ")])),_:2},1032,["onClick"]),(0,l.Wm)(s,{color:"error",onClick:a=>o.deleteItem(e)},{default:(0,l.w5)((()=>[(0,l.Uk)("Delete")])),_:2},1032,["onClick"])])),key:"0"}:void 0]),1032,["headers","items","config","total-items","loading","onPageChanged","onItemsPerPageChanged"]),(0,l.Wm)(m,{visible:o.confirmModalVisible,title:o.confirmModalTitle,message:o.confirmModalMessage,onConfirm:o.onConfirm,onCancel:o.onCancel},null,8,["visible","title","message","onConfirm","onCancel"])])),_:1})}t(560);var r=t(4870),s=t(7385),u=t(4690),c=t(2482),d=t(7139);function m(e,a,t,o,n,i){const r=(0,l.up)("v-card-title"),s=(0,l.up)("v-card-text"),u=(0,l.up)("v-spacer"),c=(0,l.up)("v-btn"),m=(0,l.up)("v-card-actions"),p=(0,l.up)("v-card"),v=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(v,{modelValue:i.internalVisible,"onUpdate:modelValue":a[0]||(a[0]=e=>i.internalVisible=e),"max-width":"400px"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(t.title),1)])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(t.message),1)])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u),(0,l.Wm)(c,{color:"green",onClick:i.confirmAction},{default:(0,l.w5)((()=>[(0,l.Uk)("Yes")])),_:1},8,["onClick"]),(0,l.Wm)(c,{color:"red",onClick:i.cancelAction},{default:(0,l.w5)((()=>[(0,l.Uk)("No")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var p={props:{visible:Boolean,title:String,message:String},emits:["confirm","cancel","update:visible"],computed:{internalVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{confirmAction(){this.$emit("confirm"),this.$emit("update:visible",!1)},cancelAction(){this.$emit("cancel"),this.$emit("update:visible",!1)}}},v=t(89);const f=(0,v.Z)(p,[["render",m]]);var g=f,C=t(9441),b=t(1827),w={name:"PreCurationTable",components:{DataDisplayTable:s.Z,CurationModal:c.Z,ConfirmationModal:g},setup(){const e=(0,r.iH)({}),a=(0,r.iH)(!1),t=(0,r.iH)(1),o=(0,r.iH)(10),n=(0,u.v0)(),i=(0,r.iH)(null),s=(0,r.iH)(!1),c=(0,r.iH)({}),d=(0,l.Fl)((()=>!!i.value)),m=(0,l.Fl)((()=>Object.keys(e.value).length)),p=(0,l.Fl)((()=>{const a=(t.value-1)*o.value,l=a+o.value;return Object.values(e.value).slice(a,l)})),v=(0,l.Fl)((()=>{const e=Object.entries(b.m_).filter((([,e])=>e.visibility.tableView)).map((([e,a])=>({title:a.label,value:e,sortable:"array"!==a.format&&"map"!==a.format,description:a.description})));return S.value&&e.push({title:"Actions",value:"actions",sortable:!1}),e})),f={columns:[{name:"approved_symbol",type:"link",to:e=>`/gene/${e.hgnc_id}`},{name:"createdAt",type:"date"},{name:"actions",type:"slot",slotName:"action-slot"}]},g=e=>{c.value=e,s.value=!0},w=()=>{s.value=!1},h=e=>{console.log("Saving data:",e)},k=e=>{t.value=e},y=e=>{o.value=e},I=(0,r.iH)(!1),_=(0,r.iH)(""),M=(0,r.iH)("");let P=null;const A=(e,a,t)=>{_.value=e,M.value=a,P=t,I.value=!0},W=()=>{P&&P(),I.value=!1},D=()=>{I.value=!1},H=(a,t=null)=>{t?e.value[a]=t:delete e.value[a],e.value={...e.value}},U=async e=>{A("Delete Precuration","Are you sure you want to delete this precuration?",(async()=>{e&&e.id?(await(0,C.QY)(e.id),H(e.id)):console.error("Item ID is undefined or invalid")}))},V=async e=>{A("Approve Precuration","Are you sure you want to approve this precuration?",(async()=>{if(e&&e.id){const a={...e,approvedBy:i.value.uid,approvedAt:new Date};await(0,C.x6)(e.id,a),H(e.id,a)}else console.error("Item ID is undefined or invalid")}))};(0,l.bv)((async()=>{a.value=!0,e.value=await(0,C.wp)(),a.value=!1})),(0,u.Aj)(n,(e=>{i.value=e}));const S=(0,l.Fl)((()=>{const e=JSON.parse(localStorage.getItem("user"));return e&&("curator"===e.role||"admin"===e.role)}));return{headers:v,paginatedItems:p,tableConfig:f,totalItems:m,loading:a,isLoggedIn:d,showModal:s,selectedItem:c,openModal:g,closeModal:w,saveData:h,updatePage:k,updateItemsPerPage:y,deleteItem:U,isCuratorOrAdmin:S,openConfirmModal:A,onConfirm:W,onCancel:D,confirmModalVisible:I,confirmModalTitle:_,confirmModalMessage:M,approveItem:V,updateLocalState:H}}};const h=(0,v.Z)(w,[["render",i],["__scopeId","data-v-20e0cabe"]]);var k=h}}]);
//# sourceMappingURL=150.9059d2f0.js.map